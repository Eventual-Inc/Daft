{#- Template for "Examples" sections in docstrings.

This template renders a list of documented examples.
It alternates between rendering text and code examples.

Context:
  section (griffe.DocstringSectionAttributes): The section to render.
-#}

{% block logs scoped %}
  {#- Logging block.

  This block can be used to log debug messages, deprecation messages, warnings, etc.
  -#}
  {{ log.debug("Rendering examples section") }}
  {% for section_type, sub_section in section.value %}
    {{ log.info("Section type: " ~ section_type.value) }}
    {{ log.info("Sub-section content type: " ~ sub_section.__class__.__name__) }}
    {{ log.info("Sub-section content (first 200 chars): " ~ sub_section[:200]) }}
  {% endfor %}
{% endblock logs %}

{# YORE: Bump 2: Replace `"|get_template` with `.html.jinja"` within line. #}
{% import "language"|get_template as lang with context %}
{#- Language module providing the `t` translation method. -#}

<p><span class="doc-section-title">{{ section.title or lang.t("Examples:") }}</span></p>
{% for section_type, sub_section in section.value %}
  {% if section_type.value == "text" %}
    {{ sub_section|convert_markdown(heading_level, html_id, autoref_hook=autoref_hook) }}
  {% elif section_type.value == "examples" %}
    {#- Test if we can define and call functions in the template -#}

    {#- Define a simple test function using Jinja2 macro -#}
    {% macro test_function(input_text) %}
      FUNCTION OUTPUT: Input length is {{ input_text|length }} characters
    {% endmacro %}

    {#- Debug output - show full content for specific examples -#}
    {% set is_target_example = "king of the pirates" in sub_section or "Hokage" in sub_section %}

    {% if is_target_example %}
      <div style="border: 4px solid red; padding: 10px; margin: 10px 0; background-color: #ffe6e6;">
        <strong>ðŸŽ¯ TARGET EXAMPLE FOUND - FULL CONTENT:</strong><br>
        <hr>
        <pre style="white-space: pre-wrap; word-wrap: break-word;">{{ sub_section }}</pre>
        <hr>
        <strong>Analysis:</strong><br>
        - Total length: {{ sub_section|length }} chars<br>
        - Number of lines: {{ sub_section.split('\n')|length }}<br>
        - Contains '>>>' prompts: {{ '>>>' in sub_section }}<br>
        - Contains table characters (â•­): {{ 'â•­' in sub_section }}<br>
      </div>
    {% else %}
      <div style="border: 2px solid blue; padding: 10px; margin: 10px 0;">
        <strong>DEBUG INFO:</strong><br>
        1. Raw content length: {{ sub_section|length }} chars<br>
        2. First 100 chars: <code>{{ sub_section[:100] }}</code><br>
        3. Test function call result: {{ test_function(sub_section) }}<br>
        4. Can we use string methods? sub_section.upper()[:50] = <code>{{ sub_section.upper()[:50] }}</code>
      </div>
    {% endif %}

    {#- Original rendering for comparison -#}
    <div style="border: 2px solid green; padding: 10px; margin: 10px 0;">
      <strong>Original rendering:</strong>
      {{ sub_section|highlight(language="pycon") }}
    </div>
  {% endif %}
{% endfor %}
