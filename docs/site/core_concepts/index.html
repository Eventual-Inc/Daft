
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../quickstart/">
      
      
        <link rel="next" href="../distributed/">
      
      
      <link rel="icon" href="../img/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Core Concepts - Daft Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
  
  <style>:root{--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13M6.92 6.085h.001a.749.749 0 1 1-1.342-.67c.169-.339.436-.701.849-.977C6.845 4.16 7.369 4 8 4a2.76 2.76 0 0 1 1.637.525c.503.377.863.965.863 1.725 0 .448-.115.83-.329 1.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6 6 0 0 0-.26.16 1 1 0 0 0-.276.245.75.75 0 0 1-1.248-.832c.184-.264.42-.489.692-.661q.154-.1.313-.195l.007-.004c.1-.061.182-.11.258-.161a1 1 0 0 0 .277-.245C8.96 6.514 9 6.427 9 6.25a.61.61 0 0 0-.262-.525A1.27 1.27 0 0 0 8 5.5c-.369 0-.595.09-.74.187a1 1 0 0 0-.34.398M9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_markdown_exec_pyodide.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#core-concepts" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Daft Documentation" class="md-header__button md-logo" aria-label="Daft Documentation" data-md-component="logo">
      
  <img src="../img/daft.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Daft Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Core Concepts
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m3.55 19.09 1.41 1.41 1.8-1.79-1.42-1.42M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6c0-3.32-2.69-6-6-6m8 7h3v-2h-3m-2.76 7.71 1.8 1.79 1.41-1.41-1.79-1.8M20.45 5l-1.41-1.4-1.8 1.79 1.42 1.42M13 1h-2v3h2M6.76 5.39 4.96 3.6 3.55 5l1.79 1.81zM1 13h3v-2H1m12 9h-2v3h2"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07zm-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13zm-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87zM19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35zm4.33-2.7 1.15-2.77 2.2 2.54zm1.15-4.96-1.14-2.78 3.34.24zM9.63 18.93l2.77 1.15-2.53 2.19z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Eventual-Inc/Daft" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Daft
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href=".." class="md-tabs__link">
          
  
  Daft User Guide

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../html/api_docs/" class="md-tabs__link">
        
  
    
  
  API Docs

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Daft Documentation" class="md-nav__button md-logo" aria-label="Daft Documentation" data-md-component="logo">
      
  <img src="../img/daft.png" alt="logo">

    </a>
    Daft Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Eventual-Inc/Daft" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Daft
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Daft User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Daft User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../terms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Terminology
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Core Concepts
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Core Concepts
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dataframe" class="md-nav__link">
    <span class="md-ellipsis">
      DataFrame
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DataFrame">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-dataframe" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a Dataframe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executing-dataframe-and-viewing-data" class="md-nav__link">
    <span class="md-ellipsis">
      Executing DataFrame and Viewing Data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-should-i-materialize-my-dataframe" class="md-nav__link">
    <span class="md-ellipsis">
      When should I materialize my DataFrame?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schemas-and-types" class="md-nav__link">
    <span class="md-ellipsis">
      Schemas and Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-computation-with-expressions" class="md-nav__link">
    <span class="md-ellipsis">
      Running Computation with Expressions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#selecting-rows" class="md-nav__link">
    <span class="md-ellipsis">
      Selecting Rows
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#selecting-columns" class="md-nav__link">
    <span class="md-ellipsis">
      Selecting Columns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combining-dataframes" class="md-nav__link">
    <span class="md-ellipsis">
      Combining DataFrames
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reordering-rows" class="md-nav__link">
    <span class="md-ellipsis">
      Reordering Rows
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exploding-columns" class="md-nav__link">
    <span class="md-ellipsis">
      Exploding Columns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expressions" class="md-nav__link">
    <span class="md-ellipsis">
      Expressions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Expressions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-expressions" class="md-nav__link">
    <span class="md-ellipsis">
      Creating Expressions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-sql" class="md-nav__link">
    <span class="md-ellipsis">
      Using SQL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composing-expressions" class="md-nav__link">
    <span class="md-ellipsis">
      Composing Expressions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#if-else-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      If Else Pattern
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reading-data" class="md-nav__link">
    <span class="md-ellipsis">
      Reading Data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reading Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#from-files" class="md-nav__link">
    <span class="md-ellipsis">
      From Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-data-catalogs" class="md-nav__link">
    <span class="md-ellipsis">
      From Data Catalogs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-file-paths" class="md-nav__link">
    <span class="md-ellipsis">
      From File Paths
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-memory" class="md-nav__link">
    <span class="md-ellipsis">
      From Memory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-databases" class="md-nav__link">
    <span class="md-ellipsis">
      From Databases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-a-column-of-urls" class="md-nav__link">
    <span class="md-ellipsis">
      Reading a column of URLs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-data" class="md-nav__link">
    <span class="md-ellipsis">
      Writing Data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datatypes" class="md-nav__link">
    <span class="md-ellipsis">
      DataTypes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DataTypes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#numeric-datatypes" class="md-nav__link">
    <span class="md-ellipsis">
      Numeric DataTypes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logical-datatypes" class="md-nav__link">
    <span class="md-ellipsis">
      Logical DataTypes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#string-types" class="md-nav__link">
    <span class="md-ellipsis">
      String Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#temporal-datatypes" class="md-nav__link">
    <span class="md-ellipsis">
      Temporal DataTypes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested-datatypes" class="md-nav__link">
    <span class="md-ellipsis">
      Nested DataTypes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-datatype" class="md-nav__link">
    <span class="md-ellipsis">
      Python DataType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complex-datatypes" class="md-nav__link">
    <span class="md-ellipsis">
      Complex DataTypes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sql" class="md-nav__link">
    <span class="md-ellipsis">
      SQL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-sql-on-dataframes" class="md-nav__link">
    <span class="md-ellipsis">
      Running SQL on DataFrames
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-data-from-sql" class="md-nav__link">
    <span class="md-ellipsis">
      Reading data from SQL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sql-expressions" class="md-nav__link">
    <span class="md-ellipsis">
      SQL Expressions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sql-functions" class="md-nav__link">
    <span class="md-ellipsis">
      SQL Functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregations-and-grouping" class="md-nav__link">
    <span class="md-ellipsis">
      Aggregations and Grouping
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Aggregations and Grouping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global-aggregations" class="md-nav__link">
    <span class="md-ellipsis">
      Global Aggregations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grouped-aggregations" class="md-nav__link">
    <span class="md-ellipsis">
      Grouped Aggregations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-defined-functions-udf" class="md-nav__link">
    <span class="md-ellipsis">
      User-Defined Functions (UDF)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="User-Defined Functions (UDF)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#per-column-per-row-functions-using-apply" class="md-nav__link">
    <span class="md-ellipsis">
      Per-column per-row functions using .apply
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-column-per-partition-functions-using-udf" class="md-nav__link">
    <span class="md-ellipsis">
      Multi-column per-partition functions using @udf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-udfs" class="md-nav__link">
    <span class="md-ellipsis">
      Class UDFs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-requests" class="md-nav__link">
    <span class="md-ellipsis">
      Resource Requests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-udfs-in-ml-workloads" class="md-nav__link">
    <span class="md-ellipsis">
      Example: UDFs in ML Workloads
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multimodal-data" class="md-nav__link">
    <span class="md-ellipsis">
      Multimodal Data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-next" class="md-nav__link">
    <span class="md-ellipsis">
      What's Next?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What's Next?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integrations" class="md-nav__link">
    <span class="md-ellipsis">
      Integrations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migration-guide" class="md-nav__link">
    <span class="md-ellipsis">
      Migration Guide
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tutorials" class="md-nav__link">
    <span class="md-ellipsis">
      Tutorials
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../distributed/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Distributed Computing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Advanced
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            Advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/memory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Managing Memory Usage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/partitioning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Partitioning
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8" >
        
          
          <label class="md-nav__link" for="__nav_1_8" id="__nav_1_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Integrations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_8">
            <span class="md-nav__icon md-icon"></span>
            Integrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/ray/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ray
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/unity_catalog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unity Catalog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/iceberg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Apache Iceberg
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/delta_lake/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Delta Lake
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/hudi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Apache Hudi
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/azure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Microsoft Azure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/aws/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Amazon Web Services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/sql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/huggingface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hugging Face Datasets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_9" >
        
          
          <label class="md-nav__link" for="__nav_1_9" id="__nav_1_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Resources
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_9">
            <span class="md-nav__icon md-icon"></span>
            Resources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resources/architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resources/dataframe_comparison/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DataFrame Comparison
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resources/tutorials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resources/benchmarks/tpch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Benchmarks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resources/telemetry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Telemetry
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_10" >
        
          
          <label class="md-nav__link" for="__nav_1_10" id="__nav_1_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Migration Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_10">
            <span class="md-nav__icon md-icon"></span>
            Migration Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migration/dask_migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coming from Dask
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../html/api_docs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Docs
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="core-concepts">Core Concepts<a class="headerlink" href="#core-concepts" title="Permanent link">#</a></h1>
<div class="admonition failure">
<p class="admonition-title">todo(docs): Created a mega Core Concepts page to improve user journey. Right now <code>toc_depth=3</code> for visibility into subheadings, but are there now too many subheadings? Can we combine/condense some sections? My concern is that <code>toc_depth=2</code> is not informative unless we turn off <code>toc.integrate</code> and have a right-hand menu for all the subheadings.</p>
</div>
<p>Learn about the core concepts that Daft is built on!</p>
<h2 id="dataframe">DataFrame<a class="headerlink" href="#dataframe" title="Permanent link">#</a></h2>
<div class="admonition failure">
<p class="admonition-title">todo(docs): Check that this page makes sense. Can we have a 1-1 mapping of "Common data operations that you would perform on DataFrames are: ..." to its respective section?</p>
</div>
<div class="admonition failure">
<p class="admonition-title">todo(docs): I reused some of these sections in the Quickstart (create df, execute df and view data, select rows, select columns) but the examples in the quickstart are different. Should we still keep those sections on this page?</p>
</div>
<p>If you are coming from other DataFrame libraries such as Pandas or Polars, here are some key differences about Daft DataFrames:</p>
<ol>
<li>
<p><strong>Distributed:</strong> When running in a distributed cluster, Daft splits your data into smaller "chunks" called <em>Partitions</em>. This allows Daft to process your data in parallel across multiple machines, leveraging more resources to work with large datasets.</p>
</li>
<li>
<p><strong>Lazy:</strong> When you write operations on a DataFrame, Daft doesn't execute them immediately. Instead, it creates a plan (called a query plan) of what needs to be done. This plan is optimized and only executed when you specifically request the results, which can lead to more efficient computations.</p>
</li>
<li>
<p><strong>Multimodal:</strong> Unlike traditional tables that usually contain simple data types like numbers and text, Daft DataFrames can handle complex data types in its columns. This includes things like images, audio files, or even custom Python objects.</p>
</li>
</ol>
<p>For a full comparison between Daft and other DataFrame Libraries, see <a href="../resources/dataframe_comparison/">DataFrame Comparison</a>.</p>
<p>Common data operations that you would perform on DataFrames are:</p>
<ol>
<li><a href="./#selecting-rows"><strong>Filtering rows:</strong></a> Use <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.where.html#daft.DataFrame.where"><code>df.where(...)</code></a> to keep only the rows that meet certain conditions.</li>
<li><strong>Creating new columns:</strong> Use <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.with_column.html#daft.DataFrame.with_column"><code>df.with_column(...)</code></a> to add a new column based on calculations from existing ones.</li>
<li><a href="./#combining-dataframes"><strong>Joining DataFrames:</strong></a> Use <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.join.html#daft.DataFrame.join"><code>df.join(other_df, ...)</code></a> to combine two DataFrames based on common columns.</li>
<li><a href="./#reordering-rows"><strong>Sorting:</strong></a> Use <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.sort.html#daft.DataFrame.sort"><code>df.sort(...)</code></a> to arrange your data based on values in one or more columns.</li>
<li><a href="./#aggregations-and-grouping"><strong>Grouping and aggregating:</strong></a> Use <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.groupby.html#daft.DataFrame.groupby"><code>df.groupby(...).agg(...)</code></a> to summarize your data by groups.</li>
</ol>
<h3 id="creating-a-dataframe">Creating a Dataframe<a class="headerlink" href="#creating-a-dataframe" title="Permanent link">#</a></h3>
<div class="admonition tip">
<p class="admonition-title">See Also</p>
<p><a href="./#reading-data">Reading Data</a> and <a href="./#writing-data">Writing Data</a> - a more in-depth guide on various options for reading and writing data to and from Daft DataFrames from in-memory data (Python, Arrow), files (Parquet, CSV, JSON), SQL Databases and Data Catalogs</p>
</div>
<p>Let's create our first Dataframe from a Python dictionary of columns.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">daft</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
    <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">],</span>
    <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
    <span class="s2">&quot;D&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
<span class="p">})</span>
</code></pre></div>
</div>
</div>
</div>
<p>Examine your Dataframe by printing it:</p>
<div class="highlight"><pre><span></span><code>df
</code></pre></div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────┬─────────┬─────────┬──────╮
│ A     ┆ B       ┆ C       ┆ D    │
│ ---   ┆ ---     ┆ ---     ┆ ---  │
│ Int64 ┆ Float64 ┆ Boolean ┆ Null │
╞═══════╪═════════╪═════════╪══════╡
│ 1     ┆ 1.5     ┆ true    ┆ None │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┤
│ 2     ┆ 2.5     ┆ true    ┆ None │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┤
│ 3     ┆ 3.5     ┆ false   ┆ None │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┤
│ 4     ┆ 4.5     ┆ false   ┆ None │
╰───────┴─────────┴─────────┴──────╯

(Showing first 4 of 4 rows)
</code></pre></div>
<p>Congratulations - you just created your first DataFrame! It has 4 columns, "A", "B", "C", and "D". Let's try to select only the "A", "B", and "C" columns:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">🐍 Python</label><label for="__tabbed_2_2">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">)</span>
<span class="n">df</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;SELECT A, B, C FROM df&quot;</span><span class="p">)</span>
<span class="n">df</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────┬─────────┬─────────╮
│ A     ┆ B       ┆ C       │
│ ---   ┆ ---     ┆ ---     │
│ Int64 ┆ Float64 ┆ Boolean │
╰───────┴─────────┴─────────╯

(No data to display: Dataframe not materialized)
</code></pre></div>
<p>But wait - why is it printing the message <code>(No data to display: Dataframe not materialized)</code> and where are the rows of each column?</p>
<h3 id="executing-dataframe-and-viewing-data">Executing DataFrame and Viewing Data<a class="headerlink" href="#executing-dataframe-and-viewing-data" title="Permanent link">#</a></h3>
<p>The reason that our DataFrame currently does not display its rows is that Daft DataFrames are <strong>lazy</strong>. This just means that Daft DataFrames will defer all its work until you tell it to execute.</p>
<p>In this case, Daft is just deferring the work required to read the data and select columns, however in practice this laziness can be very useful for helping Daft optimize your queries before execution!</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>When you call methods on a Daft Dataframe, it defers the work by adding to an internal "plan". You can examine the current plan of a DataFrame by calling <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.explain.html#daft.DataFrame.explain"><code>df.explain()</code></a>!</p>
<p>Passing the <code>show_all=True</code> argument will show you the plan after Daft applies its query optimizations and the physical (lower-level) plan.</p>
<div class="highlight"><pre><span></span><code>Plan Output

== Unoptimized Logical Plan ==

* Project: col(A), col(B), col(C)
|
* Source:
|   Number of partitions = 1
|   Output schema = A#Int64, B#Float64, C#Boolean, D#Null


== Optimized Logical Plan ==

* Project: col(A), col(B), col(C)
|
* Source:
|   Number of partitions = 1
|   Output schema = A#Int64, B#Float64, C#Boolean, D#Null


== Physical Plan ==

* Project: col(A), col(B), col(C)
|   Clustering spec = { Num partitions = 1 }
|
* InMemoryScan:
|   Schema = A#Int64, B#Float64, C#Boolean, D#Null,
|   Size bytes = 65,
|   Clustering spec = { Num partitions = 1 }
</code></pre></div>
</div>
<p>We can tell Daft to execute our DataFrame and store the results in-memory using <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.collect.html#daft.DataFrame.collect"><code>df.collect()</code></a>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="n">df</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────┬─────────┬─────────┬──────╮
│ A     ┆ B       ┆ C       ┆ D    │
│ ---   ┆ ---     ┆ ---     ┆ ---  │
│ Int64 ┆ Float64 ┆ Boolean ┆ Null │
╞═══════╪═════════╪═════════╪══════╡
│ 1     ┆ 1.5     ┆ true    ┆ None │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┤
│ 2     ┆ 2.5     ┆ true    ┆ None │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┤
│ 3     ┆ 3.5     ┆ false   ┆ None │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┤
│ 4     ┆ 4.5     ┆ false   ┆ None │
╰───────┴─────────┴─────────┴──────╯

(Showing first 4 of 4 rows)
</code></pre></div>
<p>Now your DataFrame object <code>df</code> is <strong>materialized</strong> - Daft has executed all the steps required to compute the results, and has cached the results in memory so that it can display this preview.</p>
<p>Any subsequent operations on <code>df</code> will avoid recomputations, and just use this materialized result!</p>
<h3 id="when-should-i-materialize-my-dataframe">When should I materialize my DataFrame?<a class="headerlink" href="#when-should-i-materialize-my-dataframe" title="Permanent link">#</a></h3>
<p>If you "eagerly" call <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.collect.html#daft.DataFrame.collect"><code>df.collect()</code></a> immediately on every DataFrame, you may run into issues:</p>
<ol>
<li>If data is too large at any step, materializing all of it may cause memory issues</li>
<li>Optimizations are not possible since we cannot "predict future operations"</li>
</ol>
<p>However, data science is all about experimentation and trying different things on the same data. This means that materialization is crucial when working interactively with DataFrames, since it speeds up all subsequent experimentation on that DataFrame.</p>
<p>We suggest materializing DataFrames using <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.collect.html#daft.DataFrame.collect"><code>df.collect()</code></a> when they contain expensive operations (e.g. sorts or expensive function calls) and have to be called multiple times by downstream code:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">🐍 Python</label><label for="__tabbed_4_2">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>  <span class="c1"># expensive sort</span>
<span class="n">df</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>  <span class="c1"># materialize the DataFrame</span>

<span class="c1"># All subsequent work on df avoids recomputing previous steps</span>
<span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">&quot;try_this&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM df ORDER BY A&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

<span class="c1"># All subsequent work on df avoids recomputing previous steps</span>
<span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;SELECT sum(B) FROM df&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;SELECT mean(B) FROM df&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;SELECT *, (A + 1) AS try_this FROM df&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭─────────╮
│ B       │
│ ---     │
│ Float64 │
╞═════════╡
│ 12      │
╰─────────╯

(Showing first 1 of 1 rows)

╭─────────╮
│ B       │
│ ---     │
│ Float64 │
╞═════════╡
│ 3       │
╰─────────╯

(Showing first 1 of 1 rows)

╭───────┬─────────┬─────────┬──────────╮
│ A     ┆ B       ┆ C       ┆ try_this │
│ ---   ┆ ---     ┆ ---     ┆ ---      │
│ Int64 ┆ Float64 ┆ Boolean ┆ Int64    │
╞═══════╪═════════╪═════════╪══════════╡
│ 1     ┆ 1.5     ┆ true    ┆ 2        │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌┤
│ 2     ┆ 2.5     ┆ true    ┆ 3        │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌┤
│ 3     ┆ 3.5     ┆ false   ┆ 4        │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌┤
│ 4     ┆ 4.5     ┆ false   ┆ 5        │
╰───────┴─────────┴─────────┴──────────╯

(Showing first 4 of 4 rows)
</code></pre></div>
<p>In many other cases however, there are better options than materializing your entire DataFrame with <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.collect.html#daft.DataFrame.collect"><code>df.collect()</code></a>:</p>
<ol>
<li><strong>Peeking with df.show(N)</strong>: If you only want to "peek" at the first few rows of your data for visualization purposes, you can use <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.show.html#daft.DataFrame.show"><code>df.show(N)</code></a>, which processes and shows only the first <code>N</code> rows.</li>
<li><strong>Writing to disk</strong>: The <code>df.write_*</code> methods will process and write your data to disk per-partition, avoiding materializing it all in memory at once.</li>
<li><strong>Pruning data</strong>: You can materialize your DataFrame after performing a <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.limit.html#daft.DataFrame.limit"><code>df.limit()</code></a>, <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.where.html#daft.DataFrame.where"><code>df.where()</code></a> or <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.select.html#daft.DataFrame.select"><code>df.select()</code></a> operation which processes your data or prune it down to a smaller size.</li>
</ol>
<h3 id="schemas-and-types">Schemas and Types<a class="headerlink" href="#schemas-and-types" title="Permanent link">#</a></h3>
<p>Notice also that when we printed our DataFrame, Daft displayed its <strong>schema</strong>. Each column of your DataFrame has a <strong>name</strong> and a <strong>type</strong>, and all data in that column will adhere to that type!</p>
<p>Daft can display your DataFrame's schema without materializing it. Under the hood, it performs intelligent sampling of your data to determine the appropriate schema, and if you make any modifications to your DataFrame it can infer the resulting types based on the operation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Under the hood, Daft represents data in the <a href="https://arrow.apache.org/">Apache Arrow</a> format, which allows it to efficiently represent and work on data using high-performance kernels which are written in Rust.</p>
</div>
<h3 id="running-computation-with-expressions">Running Computation with Expressions<a class="headerlink" href="#running-computation-with-expressions" title="Permanent link">#</a></h3>
<p>To run computations on data in our DataFrame, we use Expressions.</p>
<p>The following statement will <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.show.html#daft.DataFrame.show"><code>df.show()</code></a> a DataFrame that has only one column - the column <code>A</code> from our original DataFrame but with every row incremented by 1.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">🐍 Python</label><label for="__tabbed_5_2">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;SELECT A + 1 FROM df&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────╮
│ A     │
│ ---   │
│ Int64 │
╞═══════╡
│ 2     │
├╌╌╌╌╌╌╌┤
│ 3     │
├╌╌╌╌╌╌╌┤
│ 4     │
├╌╌╌╌╌╌╌┤
│ 5     │
╰───────╯

(Showing first 4 of 4 rows)
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>A common pattern is to create a new columns using <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.with_column.html"><code>DataFrame.with_column</code></a>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">🐍 Python</label><label for="__tabbed_6_2">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Creates a new column named &quot;foo&quot; which takes on values</span>
<span class="c1"># of column &quot;A&quot; incremented by 1</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Creates a new column named &quot;foo&quot; which takes on values</span>
<span class="c1"># of column &quot;A&quot; incremented by 1</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;SELECT *, A + 1 AS foo FROM df&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────┬─────────┬─────────┬───────╮
│ A     ┆ B       ┆ C       ┆ foo   │
│ ---   ┆ ---     ┆ ---     ┆ ---   │
│ Int64 ┆ Float64 ┆ Boolean ┆ Int64 │
╞═══════╪═════════╪═════════╪═══════╡
│ 1     ┆ 1.5     ┆ true    ┆ 2     │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┤
│ 2     ┆ 2.5     ┆ true    ┆ 3     │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┤
│ 3     ┆ 3.5     ┆ false   ┆ 4     │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┤
│ 4     ┆ 4.5     ┆ false   ┆ 5     │
╰───────┴─────────┴─────────┴───────╯

(Showing first 4 of 4 rows)
</code></pre></div>
<p>Congratulations, you have just written your first <strong>Expression</strong>: <code>df["A"] + 1</code>! Expressions are a powerful way of describing computation on columns. For more details, check out the next section on <a href="./#expressions">Expressions</a>.</p>
<!-- In a previous section, we covered Expressions which are ways of expressing computation on a single column.

However, the Daft DataFrame is a table containing equal-length columns. Many operations affect the entire table at once, which in turn affects the ordering or sizes of all columns.

This section of the user guide covers these operations, and how to use them. -->

<h3 id="selecting-rows">Selecting Rows<a class="headerlink" href="#selecting-rows" title="Permanent link">#</a></h3>
<p>We can limit the rows to the first <code>N</code> rows using <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.limit.html#daft.DataFrame.limit"><code>df.limit(N)</code></a>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:1"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
    <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
<span class="p">})</span>

<span class="n">df</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>+---------+---------+
|       A |       B |
|   Int64 |   Int64 |
+=========+=========+
|       1 |       6 |
+---------+---------+
|       2 |       7 |
+---------+---------+
|       3 |       8 |
+---------+---------+
(Showing first 3 rows)
</code></pre></div>
<p>We can also filter rows using <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.where.html#daft.DataFrame.where"><code>df.where()</code></a>, which takes an input a Logical Expression predicate:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>+---------+---------+
|       A |       B |
|   Int64 |   Int64 |
+=========+=========+
|       4 |       9 |
+---------+---------+
|       5 |      10 |
+---------+---------+
(Showing first 2 rows)
</code></pre></div>
<h3 id="selecting-columns">Selecting Columns<a class="headerlink" href="#selecting-columns" title="Permanent link">#</a></h3>
<p>Select specific columns in a DataFrame using <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.select.html#daft.DataFrame.select"><code>df.select()</code></a>, which also takes Expressions as an input.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:1"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">daft</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]})</span>

<span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>+---------+
|       A |
|   Int64 |
+=========+
|       1 |
+---------+
|       2 |
+---------+
|       3 |
+---------+
(Showing first 3 rows)
</code></pre></div>
<p>A useful alias for <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.select.html#daft.DataFrame.select"><code>df.select()</code></a> is indexing a DataFrame with a list of column names or Expressions:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="10:1"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="p">[[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>+---------+---------+
|       A |       B |
|   Int64 |   Int64 |
+=========+=========+
|       1 |       4 |
+---------+---------+
|       2 |       5 |
+---------+---------+
|       3 |       6 |
+---------+---------+
(Showing first 3 rows)
</code></pre></div>
<p>Sometimes, it may be useful to exclude certain columns from a DataFrame. This can be done with <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.exclude.html#daft.DataFrame.exclude"><code>df.exclude()</code></a>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="11:1"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>+---------+
|       B |
|   Int64 |
+=========+
|       4 |
+---------+
|       5 |
+---------+
|       6 |
+---------+
(Showing first 3 rows)
</code></pre></div>
<p>Adding a new column can be achieved with <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.with_column.html#daft.DataFrame.with_column"><code>df.with_column()</code></a>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="12:1"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>+---------+---------+---------+
|       A |       B |       C |
|   Int64 |   Int64 |   Int64 |
+=========+=========+=========+
|       1 |       4 |       5 |
+---------+---------+---------+
|       2 |       5 |       7 |
+---------+---------+---------+
|       3 |       6 |       9 |
+---------+---------+---------+
(Showing first 3 rows)
</code></pre></div>
<h4 id="selecting-columns-using-wildcards">Selecting Columns Using Wildcards<a class="headerlink" href="#selecting-columns-using-wildcards" title="Permanent link">#</a></h4>
<p>We can select multiple columns at once using wildcards. The expression <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/expression_methods/daft.col.html#daft.col"><code>.col(*)</code></a> selects every column in a DataFrame, and you can operate on this expression in the same way as a single column:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="13:1"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]})</span>
<span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────┬───────╮
│ A     ┆ B     │
│ ---   ┆ ---   │
│ Int64 ┆ Int64 │
╞═══════╪═══════╡
│ 3     ┆ 12    │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┤
│ 6     ┆ 15    │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┤
│ 9     ┆ 18    │
╰───────┴───────╯
</code></pre></div>
<p>We can also select multiple columns within structs using <code>col("struct.*")</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="14:1"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
    <span class="p">]</span>
<span class="p">})</span>
<span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;A.*&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────┬───────╮
│ B     ┆ C     │
│ ---   ┆ ---   │
│ Int64 ┆ Int64 │
╞═══════╪═══════╡
│ 1     ┆ 2     │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┤
│ 3     ┆ 4     │
╰───────┴───────╯
</code></pre></div>
<p>Under the hood, wildcards work by finding all of the columns that match, then copying the expression several times and replacing the wildcard. This means that there are some caveats:</p>
<ul>
<li>Only one wildcard is allowed per expression tree. This means that <code>col("*") + col("*")</code> and similar expressions do not work.</li>
<li>Be conscious about duplicated column names. Any code like <code>df.select(col("*"), col("*") + 3)</code> will not work because the wildcards expand into the same column names.</li>
</ul>
<p>For the same reason, <code>col("A") + col("*")</code> will not work because the name on the left-hand side is inherited, meaning all the output columns are named <code>A</code>, causing an error if there is more than one.
  However, <code>col("*") + col("A")</code> will work fine.</p>
<h3 id="combining-dataframes">Combining DataFrames<a class="headerlink" href="#combining-dataframes" title="Permanent link">#</a></h3>
<p>Two DataFrames can be column-wise joined using <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.join.html#daft.DataFrame.join"><code>df.join()</code></a>.</p>
<p>This requires a "join key", which can be supplied as the <code>on</code> argument if both DataFrames have the same name for their key columns, or the <code>left_on</code> and <code>right_on</code> argument if the key column has different names in each DataFrame.</p>
<p>Daft also supports multi-column joins if you have a join key comprising of multiple columns!</p>
<div class="tabbed-set tabbed-alternate" data-tabs="15:1"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="__tabbed_15_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df1</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]})</span>
<span class="n">df2</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]})</span>

<span class="n">df1</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;A&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>+---------+---------+---------+
|       A |       B |       C |
|   Int64 |   Int64 |   Int64 |
+=========+=========+=========+
|       1 |       4 |       7 |
+---------+---------+---------+
|       2 |       5 |       8 |
+---------+---------+---------+
|       3 |       6 |       9 |
+---------+---------+---------+
(Showing first 3 rows)
</code></pre></div>
<h3 id="reordering-rows">Reordering Rows<a class="headerlink" href="#reordering-rows" title="Permanent link">#</a></h3>
<p>Rows in a DataFrame can be reordered based on some column using <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.sort.html#daft.DataFrame.sort"><code>df.sort()</code></a>. Daft also supports multi-column sorts for sorting on multiple columns at once.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="16:1"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><div class="tabbed-labels"><label for="__tabbed_16_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
<span class="p">})</span>

<span class="n">df</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>+---------+---------+
|       A |       B |
|   Int64 |   Int64 |
+=========+=========+
|       3 |       8 |
+---------+---------+
|       2 |       7 |
+---------+---------+
|       1 |       6 |
+---------+---------+
(Showing first 3 rows)
</code></pre></div>
<h3 id="exploding-columns">Exploding Columns<a class="headerlink" href="#exploding-columns" title="Permanent link">#</a></h3>
<p>The <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.explode.html#daft.DataFrame.explode"><code>df.explode()</code></a> method can be used to explode a column containing a list of values into multiple rows. All other rows will be <strong>duplicated</strong>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="17:1"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><div class="tabbed-labels"><label for="__tabbed_17_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]],</span>
<span class="p">})</span>

<span class="n">df</span><span class="o">.</span><span class="n">explode</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>+---------+---------+
|       A |       B |
|   Int64 |   Int64 |
+=========+=========+
|       1 |       1 |
+---------+---------+
|       1 |       2 |
+---------+---------+
|       1 |       3 |
+---------+---------+
|       2 |       4 |
+---------+---------+
|       2 |       5 |
+---------+---------+
|       2 |       6 |
+---------+---------+
|       3 |       7 |
+---------+---------+
|       3 |       8 |
+---------+---------+
(Showing first 8 rows)
</code></pre></div>
<!-- Commented out because there's Advanced/Partitioning section -->
<!-- ## Repartitioning

Daft is a distributed DataFrame, and the dataframe is broken into multiple "partitions" which are processed in parallel across the cores in your machine or cluster.

You may choose to increase or decrease the number of partitions with [`df.repartition()`](https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.repartition.html#daft.DataFrame.repartition).

1. Increasing the number of partitions to 2x the total number of CPUs could help with resource utilization
2. If each partition is potentially overly large (e.g. containing large images), causing memory issues, you may increase the number of partitions to reduce the size of each individual partition
3. If you have too many partitions, global operations such as a sort or a join may take longer to execute

A good rule of thumb is to keep the number of partitions as twice the number of CPUs available on your backend, increasing the number of partitions as necessary if they cannot be processed in memory. -->

<h2 id="expressions">Expressions<a class="headerlink" href="#expressions" title="Permanent link">#</a></h2>
<p>Expressions are how you can express computations that should be run over columns of data.</p>
<h3 id="creating-expressions">Creating Expressions<a class="headerlink" href="#creating-expressions" title="Permanent link">#</a></h3>
<h4 id="referring-to-a-column-in-a-dataframe">Referring to a column in a DataFrame<a class="headerlink" href="#referring-to-a-column-in-a-dataframe" title="Permanent link">#</a></h4>
<p>Most commonly you will be creating expressions by using the <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/expression_methods/daft.col.html#daft.col"><code>daft.col</code></a> function.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="18:2"><input checked="checked" id="__tabbed_18_1" name="__tabbed_18" type="radio" /><input id="__tabbed_18_2" name="__tabbed_18" type="radio" /><div class="tabbed-labels"><label for="__tabbed_18_1">🐍 Python</label><label for="__tabbed_18_2">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Refers to column &quot;A&quot;</span>
<span class="n">daft</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">daft</span><span class="o">.</span><span class="n">sql_expr</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>col(A)
</code></pre></div>
<p>The above code creates an Expression that refers to a column named <code>"A"</code>.</p>
<h3 id="using-sql">Using SQL<a class="headerlink" href="#using-sql" title="Permanent link">#</a></h3>
<p>Daft can also parse valid SQL as expressions.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="19:1"><input checked="checked" id="__tabbed_19_1" name="__tabbed_19" type="radio" /><div class="tabbed-labels"><label for="__tabbed_19_1">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">daft</span><span class="o">.</span><span class="n">sql_expr</span><span class="p">(</span><span class="s2">&quot;A + 1&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>col(A) + lit(1)
</code></pre></div>
<p>The above code will create an expression representing "the column named 'x' incremented by 1". For many APIs, <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/sql.html#daft.sql_expr"><code>sql_expr</code></a> will actually be applied for you as syntactic sugar!</p>
<h4 id="literals">Literals<a class="headerlink" href="#literals" title="Permanent link">#</a></h4>
<p>You may find yourself needing to hardcode a "single value" oftentimes as an expression. Daft provides a <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/expression_methods/daft.lit.html"><code>lit()</code></a> helper to do so:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="20:2"><input checked="checked" id="__tabbed_20_1" name="__tabbed_20" type="radio" /><input id="__tabbed_20_2" name="__tabbed_20" type="radio" /><div class="tabbed-labels"><label for="__tabbed_20_1">🐍 Python</label><label for="__tabbed_20_2">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">daft</span><span class="w"> </span><span class="kn">import</span> <span class="n">lit</span>

<span class="c1"># Refers to an expression which always evaluates to 42</span>
<span class="n">lit</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Refers to an expression which always evaluates to 42</span>
<span class="n">daft</span><span class="o">.</span><span class="n">sql_expr</span><span class="p">(</span><span class="s2">&quot;42&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p><div class="highlight"><span class="filename">Output</span><pre><span></span><code>lit(42)
</code></pre></div>
This special :func:<code>~daft.expressions.lit</code> expression we just created evaluates always to the value <code>42</code>.</p>
<h4 id="wildcard-expressions">Wildcard Expressions<a class="headerlink" href="#wildcard-expressions" title="Permanent link">#</a></h4>
<p>You can create expressions on multiple columns at once using a wildcard. The expression <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/expression_methods/daft.col.html#daft.col"><code>col("*")</code></a>) selects every column in a DataFrame, and you can operate on this expression in the same way as a single column:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="21:1"><input checked="checked" id="__tabbed_21_1" name="__tabbed_21" type="radio" /><div class="tabbed-labels"><label for="__tabbed_21_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">daft</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">daft</span><span class="w"> </span><span class="kn">import</span> <span class="n">col</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]})</span>
<span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────┬───────╮
│ A     ┆ B     │
│ ---   ┆ ---   │
│ Int64 ┆ Int64 │
╞═══════╪═══════╡
│ 3     ┆ 12    │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┤
│ 6     ┆ 15    │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┤
│ 9     ┆ 18    │
╰───────┴───────╯
</code></pre></div>
<p>Wildcards also work very well for accessing all members of a struct column:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="22:2"><input checked="checked" id="__tabbed_22_1" name="__tabbed_22" type="radio" /><input id="__tabbed_22_2" name="__tabbed_22" type="radio" /><div class="tabbed-labels"><label for="__tabbed_22_1">🐍 Python</label><label for="__tabbed_22_2">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">daft</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">daft</span><span class="w"> </span><span class="kn">import</span> <span class="n">col</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;person&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Alice&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">25</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Charlie&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">35</span><span class="p">}</span>
    <span class="p">]</span>
<span class="p">})</span>

<span class="c1"># Access all fields of the &#39;person&#39; struct</span>
<span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;person.*&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">daft</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;person&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Alice&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">25</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Charlie&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">35</span><span class="p">}</span>
    <span class="p">]</span>
<span class="p">})</span>

<span class="c1"># Access all fields of the &#39;person&#39; struct using SQL</span>
<span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;SELECT person.* FROM df&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭──────────┬───────╮
│ name     ┆ age   │
│ ---      ┆ ---   │
│ String   ┆ Int64 │
╞══════════╪═══════╡
│ Alice    ┆ 30    │
├╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┤
│ Bob      ┆ 25    │
├╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┤
│ Charlie  ┆ 35    │
╰──────────┴───────╯
</code></pre></div>
<p>In this example, we use the wildcard <code>*</code> to access all fields of the <code>person</code> struct column. This is equivalent to selecting each field individually (<code>person.name</code>, <code>person.age</code>), but is more concise and flexible, especially when dealing with structs that have many fields.</p>
<h3 id="composing-expressions">Composing Expressions<a class="headerlink" href="#composing-expressions" title="Permanent link">#</a></h3>
<h4 id="numeric-expressions">Numeric Expressions<a class="headerlink" href="#numeric-expressions" title="Permanent link">#</a></h4>
<p>Since column "A" is an integer, we can run numeric computation such as addition, division and checking its value. Here are some examples where we create new columns using the results of such computations:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="23:2"><input checked="checked" id="__tabbed_23_1" name="__tabbed_23" type="radio" /><input id="__tabbed_23_2" name="__tabbed_23" type="radio" /><div class="tabbed-labels"><label for="__tabbed_23_1">🐍 Python</label><label for="__tabbed_23_2">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Add 1 to each element in column &quot;A&quot;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">&quot;A_add_one&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># Divide each element in column A by 2</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">&quot;A_divide_two&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">)</span>

<span class="c1"># Check if each element in column A is more than 1</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">&quot;A_gt_1&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    SELECT</span>
<span class="s2">        *,</span>
<span class="s2">        A + 1 AS A_add_one,</span>
<span class="s2">        A / 2.0 AS A_divide_two,</span>
<span class="s2">        A &gt; 1 AS A_gt_1</span>
<span class="s2">    FROM df</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>+---------+-------------+----------------+-----------+
|       A |   A_add_one |   A_divide_two | A_gt_1    |
|   Int64 |       Int64 |        Float64 | Boolean   |
+=========+=============+================+===========+
|       1 |           2 |            0.5 | false     |
+---------+-------------+----------------+-----------+
|       2 |           3 |            1   | true      |
+---------+-------------+----------------+-----------+
|       3 |           4 |            1.5 | true      |
+---------+-------------+----------------+-----------+
(Showing first 3 of 3 rows)
</code></pre></div>
<p>Notice that the returned types of these operations are also well-typed according to their input types. For example, calling <code>df["A"] &gt; 1</code> returns a column of type <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType.bool"><code>Boolean</code></a>.</p>
<p>Both the <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType.float32"><code>Float</code></a> and <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType.int16"><code>Int</code></a> types are numeric types, and inherit many of the same arithmetic Expression operations. You may find the full list of numeric operations in the <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/expressions.html#numeric">Expressions API Reference</a>.</p>
<h4 id="string-expressions">String Expressions<a class="headerlink" href="#string-expressions" title="Permanent link">#</a></h4>
<p>Daft also lets you have columns of strings in a DataFrame. Let's take a look!</p>
<div class="tabbed-set tabbed-alternate" data-tabs="24:1"><input checked="checked" id="__tabbed_24_1" name="__tabbed_24" type="radio" /><div class="tabbed-labels"><label for="__tabbed_24_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span><span class="p">]})</span>
<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>+--------+
| B      |
| Utf8   |
+========+
| foo    |
+--------+
| bar    |
+--------+
| baz    |
+--------+
(Showing first 3 rows)
</code></pre></div>
<p>Unlike the numeric types, the string type does not support arithmetic operations such as <code>*</code> and <code>/</code>. The one exception to this is the <code>+</code> operator, which is overridden to concatenate two string expressions as is commonly done in Python. Let's try that!</p>
<div class="tabbed-set tabbed-alternate" data-tabs="25:2"><input checked="checked" id="__tabbed_25_1" name="__tabbed_25" type="radio" /><input id="__tabbed_25_2" name="__tabbed_25" type="radio" /><div class="tabbed-labels"><label for="__tabbed_25_1">🐍 Python</label><label for="__tabbed_25_2">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">&quot;B2&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;foo&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;SELECT *, B + &#39;foo&#39; AS B2 FROM df&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>+--------+--------+
| B      | B2     |
| Utf8   | Utf8   |
+========+========+
| foo    | foofoo |
+--------+--------+
| bar    | barfoo |
+--------+--------+
| baz    | bazfoo |
+--------+--------+
(Showing first 3 rows)
</code></pre></div>
<p>There are also many string operators that are accessed through a separate <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/expressions.html#strings"><code>.str.*</code></a> "method namespace".</p>
<p>For example, to check if each element in column "B" contains the substring "a", we can use the <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/expression_methods/daft.Expression.str.contains.html#daft.Expression.str.contains"><code>.str.contains</code></a> method:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="26:2"><input checked="checked" id="__tabbed_26_1" name="__tabbed_26" type="radio" /><input id="__tabbed_26_2" name="__tabbed_26" type="radio" /><div class="tabbed-labels"><label for="__tabbed_26_1">🐍 Python</label><label for="__tabbed_26_2">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">&quot;B2_contains_B&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;B2&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">]))</span>
<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;SELECT *, contains(B2, B) AS B2_contains_B FROM df&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>+--------+--------+-----------------+
| B      | B2     | B2_contains_B   |
| Utf8   | Utf8   | Boolean         |
+========+========+=================+
| foo    | foofoo | true            |
+--------+--------+-----------------+
| bar    | barfoo | true            |
+--------+--------+-----------------+
| baz    | bazfoo | true            |
+--------+--------+-----------------+
(Showing first 3 rows)
</code></pre></div>
<p>You may find a full list of string operations in the <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/expressions.html">Expressions API Reference</a>.</p>
<h4 id="url-expressions">URL Expressions<a class="headerlink" href="#url-expressions" title="Permanent link">#</a></h4>
<p>One special case of a String column you may find yourself working with is a column of URL strings.</p>
<p>Daft provides the <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/expressions.html"><code>.url.*</code></a> method namespace with functionality for working with URL strings. For example, to download data from URLs:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="27:2"><input checked="checked" id="__tabbed_27_1" name="__tabbed_27" type="radio" /><input id="__tabbed_27_2" name="__tabbed_27" type="radio" /><div class="tabbed-labels"><label for="__tabbed_27_1">🐍 Python</label><label for="__tabbed_27_2">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;urls&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;https://www.google.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;s3://daft-public-data/open-images/validation-images/0001eeaf4aed83f9.jpg&quot;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">})</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;urls&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">download</span><span class="p">())</span>
<span class="n">df</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;urls&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;https://www.google.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;s3://daft-public-data/open-images/validation-images/0001eeaf4aed83f9.jpg&quot;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">})</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    SELECT</span>
<span class="s2">        urls,</span>
<span class="s2">        url_download(urls) AS data</span>
<span class="s2">    FROM df</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>+----------------------+----------------------+
| urls                 | data                 |
| Utf8                 | Binary               |
+======================+======================+
| https://www.google.c | b&#39;&lt;!doctype          |
| om                   | html&gt;&lt;html           |
|                      | itemscope=&quot;&quot; itemtyp |
|                      | e=&quot;http://sche...    |
+----------------------+----------------------+
| s3://daft-public-    | b&#39;\xff\xd8\xff\xe0\x |
| data/open-           | 00\x10JFIF\x00\x01\x |
| images/validation-   | 01\x01\x00H\x00H\... |
| images/0001e...      |                      |
+----------------------+----------------------+
(Showing first 2 of 2 rows)
</code></pre></div>
<p>This works well for URLs which are HTTP paths to non-HTML files (e.g. jpeg), local filepaths or even paths to a file in an object store such as AWS S3 as well!</p>
<h4 id="json-expressions">JSON Expressions<a class="headerlink" href="#json-expressions" title="Permanent link">#</a></h4>
<p>If you have a column of JSON strings, Daft provides the <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/expressions.html#json"><code>.json.*</code></a> method namespace to run <a href="https://stedolan.github.io/jq/manual/">JQ-style filters</a> on them. For example, to extract a value from a JSON object:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="28:2"><input checked="checked" id="__tabbed_28_1" name="__tabbed_28" type="radio" /><input id="__tabbed_28_2" name="__tabbed_28" type="radio" /><div class="tabbed-labels"><label for="__tabbed_28_1">🐍 Python</label><label for="__tabbed_28_2">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;json&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;{&quot;a&quot;: 1, &quot;b&quot;: 2}&#39;</span><span class="p">,</span>
        <span class="s1">&#39;{&quot;a&quot;: 3, &quot;b&quot;: 4}&#39;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">})</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;json&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">json</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;.a&quot;</span><span class="p">))</span>
<span class="n">df</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;json&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;{&quot;a&quot;: 1, &quot;b&quot;: 2}&#39;</span><span class="p">,</span>
        <span class="s1">&#39;{&quot;a&quot;: 3, &quot;b&quot;: 4}&#39;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">})</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    SELECT</span>
<span class="s2">        json,</span>
<span class="s2">        json_query(json, &#39;.a&#39;) AS a</span>
<span class="s2">    FROM df</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭──────────────────┬──────╮
│ json             ┆ a    │
│ ---              ┆ ---  │
│ Utf8             ┆ Utf8 │
╞══════════════════╪══════╡
│ {&quot;a&quot;: 1, &quot;b&quot;: 2} ┆ 1    │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┤
│ {&quot;a&quot;: 3, &quot;b&quot;: 4} ┆ 3    │
╰──────────────────┴──────╯

(Showing first 2 of 2 rows)
</code></pre></div>
<p>Daft uses <a href="https://github.com/01mf02/jaq/tree/main">jaq</a> as the underlying executor, so you can find the full list of supported filters in the <a href="https://github.com/01mf02/jaq/tree/main">jaq documentation</a>.</p>
<h4 id="logical-expressions">Logical Expressions<a class="headerlink" href="#logical-expressions" title="Permanent link">#</a></h4>
<p>Logical Expressions are an expression that refers to a column of type <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType.bool"><code>Boolean</code></a>, and can only take on the values True or False.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="29:1"><input checked="checked" id="__tabbed_29_1" name="__tabbed_29" type="radio" /><div class="tabbed-labels"><label for="__tabbed_29_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">]})</span>
</code></pre></div>
</div>
</div>
</div>
<p>Daft supports logical operations such as <code>&amp;</code> (and) and <code>|</code> (or) between logical expressions.</p>
<h4 id="comparisons">Comparisons<a class="headerlink" href="#comparisons" title="Permanent link">#</a></h4>
<p>Many of the types in Daft support comparisons between expressions that returns a Logical Expression.</p>
<p>For example, here we can compare if each element in column "A" is equal to elements in column "B":</p>
<div class="tabbed-set tabbed-alternate" data-tabs="30:2"><input checked="checked" id="__tabbed_30_1" name="__tabbed_30" type="radio" /><input id="__tabbed_30_2" name="__tabbed_30" type="radio" /><div class="tabbed-labels"><label for="__tabbed_30_1">🐍 Python</label><label for="__tabbed_30_2">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">&quot;A_eq_B&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">])</span>

<span class="n">df</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    SELECT</span>
<span class="s2">        A,</span>
<span class="s2">        B,</span>
<span class="s2">        A = B AS A_eq_B</span>
<span class="s2">    FROM df</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────┬───────┬─────────╮
│ A     ┆ B     ┆ A_eq_B  │
│ ---   ┆ ---   ┆ ---     │
│ Int64 ┆ Int64 ┆ Boolean │
╞═══════╪═══════╪═════════╡
│ 1     ┆ 1     ┆ true    │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ 2     ┆ 2     ┆ true    │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ 3     ┆ 4     ┆ false   │
╰───────┴───────┴─────────╯

(Showing first 3 of 3 rows)
</code></pre></div>
<p>Other useful comparisons can be found in the <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/expressions.html#numeric">Expressions API Reference</a>.</p>
<h3 id="if-else-pattern">If Else Pattern<a class="headerlink" href="#if-else-pattern" title="Permanent link">#</a></h3>
<p>The <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/expression_methods/daft.Expression.if_else.html#daft.Expression.if_else"><code>.if_else()</code></a> method is a useful expression to have up your sleeve for choosing values between two other expressions based on a logical expression:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="31:2"><input checked="checked" id="__tabbed_31_1" name="__tabbed_31" type="radio" /><input id="__tabbed_31_2" name="__tabbed_31" type="radio" /><div class="tabbed-labels"><label for="__tabbed_31_1">🐍 Python</label><label for="__tabbed_31_2">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>

<span class="c1"># Pick values from column A if the value in column A is bigger</span>
<span class="c1"># than the value in column B. Otherwise, pick values from column B.</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span>
    <span class="s2">&quot;A_if_bigger_else_B&quot;</span><span class="p">,</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">if_else</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">]),</span>
<span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    SELECT</span>
<span class="s2">        A,</span>
<span class="s2">        B,</span>
<span class="s2">        CASE</span>
<span class="s2">            WHEN A &gt; B THEN A</span>
<span class="s2">            ELSE B</span>
<span class="s2">        END AS A_if_bigger_else_B</span>
<span class="s2">    FROM df</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────┬───────┬────────────────────╮
│ A     ┆ B     ┆ A_if_bigger_else_B │
│ ---   ┆ ---   ┆ ---                │
│ Int64 ┆ Int64 ┆ Int64              │
╞═══════╪═══════╪════════════════════╡
│ 1     ┆ 0     ┆ 1                  │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 2     ┆ 2     ┆ 2                  │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 3     ┆ 4     ┆ 4                  │
╰───────┴───────┴────────────────────╯

(Showing first 3 of 3 rows)
</code></pre></div>
<p>This is a useful expression for cleaning your data!</p>
<h4 id="temporal-expressions">Temporal Expressions<a class="headerlink" href="#temporal-expressions" title="Permanent link">#</a></h4>
<p>Daft provides rich support for working with temporal data types like Timestamp and Duration. Let's explore some common temporal operations:</p>
<h5 id="basic-temporal-operations">Basic Temporal Operations<a class="headerlink" href="#basic-temporal-operations" title="Permanent link">#</a></h5>
<p>You can perform arithmetic operations with timestamps and durations, such as adding a duration to a timestamp or calculating the duration between two timestamps:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="32:2"><input checked="checked" id="__tabbed_32_1" name="__tabbed_32" type="radio" /><input id="__tabbed_32_2" name="__tabbed_32" type="radio" /><div class="tabbed-labels"><label for="__tabbed_32_1">🐍 Python</label><label for="__tabbed_32_2">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">datetime</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">59</span><span class="p">),</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">})</span>

<span class="c1"># Add 10 seconds to each timestamp</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span>
    <span class="s2">&quot;plus_10_seconds&quot;</span><span class="p">,</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">datetime</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">59</span><span class="p">),</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">})</span>

<span class="c1"># Add 10 seconds to each timestamp and calculate duration between timestamps</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    SELECT</span>
<span class="s2">        timestamp,</span>
<span class="s2">        timestamp + INTERVAL &#39;10 seconds&#39; as plus_10_seconds,</span>
<span class="s2">    FROM df</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────────────────────────────┬───────────────────────────────╮
│ timestamp                     ┆ plus_10_seconds               │
│ ---                           ┆ ---                           │
│ Timestamp(Microseconds, None) ┆ Timestamp(Microseconds, None) │
╞═══════════════════════════════╪═══════════════════════════════╡
│ 2021-01-01 00:01:01           ┆ 2021-01-01 00:01:11           │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 2021-01-01 00:01:59           ┆ 2021-01-01 00:02:09           │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 2021-01-01 00:02:00           ┆ 2021-01-01 00:02:10           │
╰───────────────────────────────┴───────────────────────────────╯
</code></pre></div>
<h5 id="temporal-component-extraction">Temporal Component Extraction<a class="headerlink" href="#temporal-component-extraction" title="Permanent link">#</a></h5>
<p>The <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/expressions.html#temporal"><code>.dt.*</code></a> method namespace provides extraction methods for the components of a timestamp, such as year, month, day, hour, minute, and second:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="33:2"><input checked="checked" id="__tabbed_33_1" name="__tabbed_33" type="radio" /><input id="__tabbed_33_2" name="__tabbed_33" type="radio" /><div class="tabbed-labels"><label for="__tabbed_33_1">🐍 Python</label><label for="__tabbed_33_2">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">59</span><span class="p">),</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">})</span>

<span class="c1"># Extract year, month, day, hour, minute, and second from the timestamp</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_columns</span><span class="p">({</span>
    <span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">(),</span>
    <span class="s2">&quot;month&quot;</span><span class="p">:</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="p">(),</span>
    <span class="s2">&quot;day&quot;</span><span class="p">:</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">day</span><span class="p">(),</span>
    <span class="s2">&quot;hour&quot;</span><span class="p">:</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">hour</span><span class="p">(),</span>
    <span class="s2">&quot;minute&quot;</span><span class="p">:</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">minute</span><span class="p">(),</span>
    <span class="s2">&quot;second&quot;</span><span class="p">:</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">second</span><span class="p">()</span>
<span class="p">})</span>

<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">59</span><span class="p">),</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">})</span>

<span class="c1"># Extract year, month, day, hour, minute, and second from the timestamp</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    SELECT</span>
<span class="s2">        timestamp,</span>
<span class="s2">        year(timestamp) as year,</span>
<span class="s2">        month(timestamp) as month,</span>
<span class="s2">        day(timestamp) as day,</span>
<span class="s2">        hour(timestamp) as hour,</span>
<span class="s2">        minute(timestamp) as minute,</span>
<span class="s2">        second(timestamp) as second</span>
<span class="s2">    FROM df</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────────────────────────────┬───────┬────────┬────────┬────────┬────────┬────────╮
│ timestamp                     ┆ year  ┆ month  ┆ day    ┆ hour   ┆ minute ┆ second │
│ ---                           ┆ ---   ┆ ---    ┆ ---    ┆ ---    ┆ ---    ┆ ---    │
│ Timestamp(Microseconds, None) ┆ Int32 ┆ UInt32 ┆ UInt32 ┆ UInt32 ┆ UInt32 ┆ UInt32 │
╞═══════════════════════════════╪═══════╪════════╪════════╪════════╪════════╪════════╡
│ 2021-01-01 00:01:01           ┆ 2021  ┆ 1      ┆ 1      ┆ 0      ┆ 1      ┆ 1      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┤
│ 2021-01-01 00:01:59           ┆ 2021  ┆ 1      ┆ 1      ┆ 0      ┆ 1      ┆ 59     │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┤
│ 2021-01-01 00:02:00           ┆ 2021  ┆ 1      ┆ 1      ┆ 0      ┆ 2      ┆ 0      │
╰───────────────────────────────┴───────┴────────┴────────┴────────┴────────┴────────╯
</code></pre></div>
<h5 id="time-zone-operations">Time Zone Operations<a class="headerlink" href="#time-zone-operations" title="Permanent link">#</a></h5>
<p>You can parse strings as timestamps with time zones and convert between different time zones:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="34:2"><input checked="checked" id="__tabbed_34_1" name="__tabbed_34" type="radio" /><input id="__tabbed_34_2" name="__tabbed_34" type="radio" /><div class="tabbed-labels"><label for="__tabbed_34_1">🐍 Python</label><label for="__tabbed_34_2">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;timestamp_str&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;2021-01-01 00:00:00.123 +0800&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2021-01-02 12:30:00.456 +0800&quot;</span>
    <span class="p">]</span>
<span class="p">})</span>

<span class="c1"># Parse the timestamp string with time zone and convert to New York time</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span>
    <span class="s2">&quot;ny_time&quot;</span><span class="p">,</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;timestamp_str&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span>
        <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S</span><span class="si">%.3f</span><span class="s2"> %z&quot;</span><span class="p">,</span>
        <span class="n">timezone</span><span class="o">=</span><span class="s2">&quot;America/New_York&quot;</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;timestamp_str&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;2021-01-01 00:00:00.123 +0800&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2021-01-02 12:30:00.456 +0800&quot;</span>
    <span class="p">]</span>
<span class="p">})</span>

<span class="c1"># Parse the timestamp string with time zone and convert to New York time</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    SELECT</span>
<span class="s2">        timestamp_str,</span>
<span class="s2">        to_datetime(timestamp_str, &#39;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S</span><span class="si">%.3f</span><span class="s2"> %z&#39;, &#39;America/New_York&#39;) as ny_time</span>
<span class="s2">    FROM df</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────────────────────────────┬───────────────────────────────────────────────────╮
│ timestamp_str                 ┆ ny_time                                           │
│ ---                           ┆ ---                                               │
│ Utf8                          ┆ Timestamp(Milliseconds, Some(&quot;America/New_York&quot;)) │
╞═══════════════════════════════╪═══════════════════════════════════════════════════╡
│ 2021-01-01 00:00:00.123 +0800 ┆ 2020-12-31 11:00:00.123 EST                       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 2021-01-02 12:30:00.456 +0800 ┆ 2021-01-01 23:30:00.456 EST                       │
╰───────────────────────────────┴───────────────────────────────────────────────────╯
</code></pre></div>
<h5 id="temporal-truncation">Temporal Truncation<a class="headerlink" href="#temporal-truncation" title="Permanent link">#</a></h5>
<p>The <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/expression_methods/daft.Expression.dt.truncate.html#daft.Expression.dt.truncate"><code>.dt.truncate()</code></a> method allows you to truncate timestamps to specific time units. This can be useful for grouping data by time periods. For example, to truncate timestamps to the nearest hour:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="35:1"><input checked="checked" id="__tabbed_35_1" name="__tabbed_35" type="radio" /><div class="tabbed-labels"><label for="__tabbed_35_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">59</span><span class="p">),</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">})</span>

<span class="c1"># Truncate timestamps to the nearest hour</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span>
    <span class="s2">&quot;hour_start&quot;</span><span class="p">,</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">truncate</span><span class="p">(</span><span class="s2">&quot;1 hour&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────────────────────────────┬───────────────────────────────╮
│ timestamp                     ┆ hour_start                    │
│ ---                           ┆ ---                           │
│ Timestamp(Microseconds, None) ┆ Timestamp(Microseconds, None) │
╞═══════════════════════════════╪═══════════════════════════════╡
│ 2021-01-07 00:01:01           ┆ 2021-01-07 00:00:00           │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 2021-01-08 00:01:59           ┆ 2021-01-08 00:00:00           │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 2021-01-09 00:30:00           ┆ 2021-01-09 00:00:00           │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 2021-01-10 01:59:59           ┆ 2021-01-10 01:00:00           │
╰───────────────────────────────┴───────────────────────────────╯
</code></pre></div>
<div class="admonition failure">
<p class="admonition-title">todo(docs): Should this section also have sql examples?</p>
</div>
<p>Daft can read data from a variety of sources, and write data to many destinations.</p>
<h2 id="reading-data">Reading Data<a class="headerlink" href="#reading-data" title="Permanent link">#</a></h2>
<h3 id="from-files">From Files<a class="headerlink" href="#from-files" title="Permanent link">#</a></h3>
<p>DataFrames can be loaded from file(s) on some filesystem, commonly your local filesystem or a remote cloud object store such as AWS S3.</p>
<p>Additionally, Daft can read data from a variety of container file formats, including CSV, line-delimited JSON and Parquet.</p>
<p>Daft supports file paths to a single file, a directory of files, and wildcards. It also supports paths to remote object storage such as AWS S3.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="36:1"><input checked="checked" id="__tabbed_36_1" name="__tabbed_36" type="radio" /><div class="tabbed-labels"><label for="__tabbed_36_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">daft</span>

<span class="c1"># You can read a single CSV file from your local filesystem</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;path/to/file.csv&quot;</span><span class="p">)</span>

<span class="c1"># You can also read folders of CSV files, or include wildcards to select for patterns of file paths</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;path/to/*.csv&quot;</span><span class="p">)</span>

<span class="c1"># Other formats such as parquet and line-delimited JSON are also supported</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;path/to/*.parquet&quot;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">&quot;path/to/*.json&quot;</span><span class="p">)</span>

<span class="c1"># Remote filesystems such as AWS S3 are also supported, and can be specified with their protocols</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;s3://mybucket/path/to/*.csv&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p>To learn more about each of these constructors, as well as the options that they support, consult the API documentation on <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/creation.html#df-io-files"><code>creating DataFrames from files</code></a>.</p>
<h3 id="from-data-catalogs">From Data Catalogs<a class="headerlink" href="#from-data-catalogs" title="Permanent link">#</a></h3>
<p>If you use catalogs such as Apache Iceberg or Hive, you may wish to consult our user guide on integrations with Data Catalogs: <a href="https://www.getdaft.io/projects/docs/en/stable/user_guide/integrations.html"><code>Daft integration with Data Catalogs</code></a>.</p>
<h3 id="from-file-paths">From File Paths<a class="headerlink" href="#from-file-paths" title="Permanent link">#</a></h3>
<p>Daft also provides an easy utility to create a DataFrame from globbing a path. You can use the <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/io_functions/daft.from_glob_path.html#daft.from_glob_path"><code>daft.from_glob_path</code></a> method which will read a DataFrame of globbed filepaths.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="37:1"><input checked="checked" id="__tabbed_37_1" name="__tabbed_37" type="radio" /><div class="tabbed-labels"><label for="__tabbed_37_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_glob_path</span><span class="p">(</span><span class="s2">&quot;s3://mybucket/path/to/images/*.jpeg&quot;</span><span class="p">)</span>

<span class="c1"># +----------+------+-----+</span>
<span class="c1"># | name     | size | ... |</span>
<span class="c1"># +----------+------+-----+</span>
<span class="c1">#   ...</span>
</code></pre></div>
</div>
</div>
</div>
<p>This is especially useful for reading things such as a folder of images or documents into Daft. A common pattern is to then download data from these files into your DataFrame as bytes, using the <a href="https://getdaft.io/projects/docs/en/stable/api_docs/doc_gen/expression_methods/daft.Expression.url.download.html#daft.Expression.url.download"><code>.url.download()</code></a> method.</p>
<h3 id="from-memory">From Memory<a class="headerlink" href="#from-memory" title="Permanent link">#</a></h3>
<p>For testing, or small datasets that fit in memory, you may also create DataFrames using Python lists and dictionaries.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="38:1"><input checked="checked" id="__tabbed_38_1" name="__tabbed_38" type="radio" /><div class="tabbed-labels"><label for="__tabbed_38_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Create DataFrame using a dictionary of {column_name: list_of_values}</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span><span class="p">]})</span>

<span class="c1"># Create DataFrame using a list of rows, where each row is a dictionary of {column_name: value}</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pylist</span><span class="p">([{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="s2">&quot;foo&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="s2">&quot;baz&quot;</span><span class="p">}])</span>
</code></pre></div>
</div>
</div>
</div>
<p>To learn more, consult the API documentation on <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/creation.html#df-io-in-memory"><code>creating DataFrames from in-memory data structures</code></a>.</p>
<h3 id="from-databases">From Databases<a class="headerlink" href="#from-databases" title="Permanent link">#</a></h3>
<p>Daft can also read data from a variety of databases, including PostgreSQL, MySQL, Trino, and SQLite using the <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/io_functions/daft.read_sql.html#daft.read_sql"><code>daft.read_sql</code></a> method. In order to partition the data, you can specify a partition column, which will allow Daft to read the data in parallel.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="39:1"><input checked="checked" id="__tabbed_39_1" name="__tabbed_39" type="radio" /><div class="tabbed-labels"><label for="__tabbed_39_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Read from a PostgreSQL database</span>
<span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;postgresql://user:password@host:port/database&quot;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM my_table&quot;</span><span class="p">,</span> <span class="n">uri</span><span class="p">)</span>

<span class="c1"># Read with a partition column</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM my_table&quot;</span><span class="p">,</span> <span class="n">partition_col</span><span class="o">=</span><span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="n">uri</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p>To learn more, consult the <a href="https://www.getdaft.io/projects/docs/en/stable/user_guide/integrations/sql.html"><code>SQL User Guide</code></a> or the API documentation on <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/io_functions/daft.read_sql.html#daft.read_sql"><code>daft.read_sql</code></a>.</p>
<h3 id="reading-a-column-of-urls">Reading a column of URLs<a class="headerlink" href="#reading-a-column-of-urls" title="Permanent link">#</a></h3>
<p>Daft provides a convenient way to read data from a column of URLs using the <a href="https://getdaft.io/projects/docs/en/stable/api_docs/doc_gen/expression_methods/daft.Expression.url.download.html#daft.Expression.url.download"><code>.url.download()</code></a> method. This is particularly useful when you have a DataFrame with a column containing URLs pointing to external resources that you want to fetch and incorporate into your DataFrame.</p>
<p>Here's an example of how to use this feature:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="40:1"><input checked="checked" id="__tabbed_40_1" name="__tabbed_40" type="radio" /><div class="tabbed-labels"><label for="__tabbed_40_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Assume we have a DataFrame with a column named &#39;image_urls&#39;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;image_urls&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;https://example.com/image1.jpg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;https://example.com/image2.jpg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;https://example.com/image3.jpg&quot;</span>
    <span class="p">]</span>
<span class="p">})</span>

<span class="c1"># Download the content from the URLs and create a new column &#39;image_data&#39;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">&quot;image_data&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;image_urls&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">download</span><span class="p">())</span>
<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>+------------------------------------+------------------------------------+
| image_urls                         | image_data                         |
| Utf8                               | Binary                             |
+====================================+====================================+
| https://example.com/image1.jpg     | b&#39;\xff\xd8\xff\xe0\x00\x10JFIF...&#39; |
+------------------------------------+------------------------------------+
| https://example.com/image2.jpg     | b&#39;\xff\xd8\xff\xe0\x00\x10JFIF...&#39; |
+------------------------------------+------------------------------------+
| https://example.com/image3.jpg     | b&#39;\xff\xd8\xff\xe0\x00\x10JFIF...&#39; |
+------------------------------------+------------------------------------+

(Showing first 3 of 3 rows)
</code></pre></div>
<p>This approach allows you to efficiently download and process data from a large number of URLs in parallel, leveraging Daft's distributed computing capabilities.</p>
<h2 id="writing-data">Writing Data<a class="headerlink" href="#writing-data" title="Permanent link">#</a></h2>
<p>Writing data will execute your DataFrame and write the results out to the specified backend. The <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/dataframe.html#df-write-data"><code>df.write_*(...)</code></a> methods are used to write DataFrames to files or other destinations.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="41:1"><input checked="checked" id="__tabbed_41_1" name="__tabbed_41" type="radio" /><div class="tabbed-labels"><label for="__tabbed_41_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Write to various file formats in a local folder</span>
<span class="n">df</span><span class="o">.</span><span class="n">write_csv</span><span class="p">(</span><span class="s2">&quot;path/to/folder/&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">write_parquet</span><span class="p">(</span><span class="s2">&quot;path/to/folder/&quot;</span><span class="p">)</span>

<span class="c1"># Write DataFrame to a remote filesystem such as AWS S3</span>
<span class="n">df</span><span class="o">.</span><span class="n">write_csv</span><span class="p">(</span><span class="s2">&quot;s3://mybucket/path/&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because Daft is a distributed DataFrame library, by default it will produce multiple files (one per partition) at your specified destination. Writing your dataframe is a <strong>blocking</strong> operation that executes your DataFrame. It will return a new <code>DataFrame</code> that contains the filepaths to the written data.</p>
</div>
<h2 id="datatypes">DataTypes<a class="headerlink" href="#datatypes" title="Permanent link">#</a></h2>
<p>All columns in a Daft DataFrame have a DataType (also often abbreviated as <code>dtype</code>).</p>
<p>All elements of a column are of the same dtype, or they can be the special Null value (indicating a missing value).</p>
<p>Daft provides simple DataTypes that are ubiquituous in many DataFrames such as numbers, strings and dates - all the way up to more complex types like tensors and images.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For a full overview on all the DataTypes that Daft supports, see the <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html">DataType API Reference</a>.</p>
</div>
<h3 id="numeric-datatypes">Numeric DataTypes<a class="headerlink" href="#numeric-datatypes" title="Permanent link">#</a></h3>
<p>Numeric DataTypes allows Daft to represent numbers. These numbers can differ in terms of the number of bits used to represent them (8, 16, 32 or 64 bits) and the semantic meaning of those bits
(float vs integer vs unsigned integers).</p>
<p>Examples:</p>
<ol>
<li><a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType.int8"><code>DataType.int8()</code></a>: represents an 8-bit signed integer (-128 to 127)</li>
<li><a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType.float32"><code>DataType.float32()</code></a>: represents a 32-bit float (a float number with about 7 decimal digits of precision)</li>
</ol>
<p>Columns/expressions with these datatypes can be operated on with many numeric expressions such as <code>+</code> and <code>*</code>.</p>
<p>See also: <a href="https://www.getdaft.io/projects/docs/en/stable/user_guide/expressions.html#userguide-numeric-expressions">Numeric Expressions</a></p>
<h3 id="logical-datatypes">Logical DataTypes<a class="headerlink" href="#logical-datatypes" title="Permanent link">#</a></h3>
<p>The <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType.bool"><code>Boolean</code></a> DataType represents values which are boolean values: <code>True</code>, <code>False</code> or <code>Null</code>.</p>
<p>Columns/expressions with this dtype can be operated on using logical expressions such as <code>&amp;</code> and <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/expression_methods/daft.Expression.if_else.html#daft.Expression.if_else"><code>.if_else()</code></a>.</p>
<p>See also: <a href="https://www.getdaft.io/projects/docs/en/stable/user_guide/expressions.html#userguide-logical-expressions">Logical Expressions</a></p>
<h3 id="string-types">String Types<a class="headerlink" href="#string-types" title="Permanent link">#</a></h3>
<p>Daft has string types, which represent a variable-length string of characters.</p>
<p>As a convenience method, string types also support the <code>+</code> Expression, which has been overloaded to support concatenation of elements between two <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType.string"><code>DataType.string()</code></a> columns.</p>
<ol>
<li><a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType.string"><code>DataType.string()</code></a>: represents a string of UTF-8 characters</li>
<li><a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType.binary"><code>DataType.binary()</code></a>: represents a string of bytes</li>
</ol>
<p>See also: <a href="https://www.getdaft.io/projects/docs/en/stable/user_guide/expressions.html#userguide-string-expressions">String Expressions</a></p>
<h3 id="temporal-datatypes">Temporal DataTypes<a class="headerlink" href="#temporal-datatypes" title="Permanent link">#</a></h3>
<p>Temporal DataTypes represent data that have to do with time.</p>
<p>Examples:</p>
<ol>
<li><a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType.date"><code>DataType.date()</code></a>: represents a Date (year, month and day)</li>
<li><a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType.timestamp"><code>DataType.timestamp()</code></a>: represents a Timestamp (particular instance in time)</li>
</ol>
<p>See also: <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/expressions.html#api-expressions-temporal">Temporal Expressions</a></p>
<h3 id="nested-datatypes">Nested DataTypes<a class="headerlink" href="#nested-datatypes" title="Permanent link">#</a></h3>
<p>Nested DataTypes wrap other DataTypes, allowing you to compose types into complex data structures.</p>
<p>Examples:</p>
<ol>
<li><a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType.list"><code>DataType.list(child_dtype)</code></a>: represents a list where each element is of the child <code>dtype</code></li>
<li><a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType.struct"><code>DataType.struct({"field_name": child_dtype})</code></a>: represents a structure that has children <code>dtype</code>s, each mapped to a field name</li>
</ol>
<h3 id="python-datatype">Python DataType<a class="headerlink" href="#python-datatype" title="Permanent link">#</a></h3>
<p>The <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType.python"><code>DataType.python()</code></a> DataType represent items that are Python objects.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Daft does not impose any invariants about what <em>Python types</em> these objects are. To Daft, these are just generic Python objects!</p>
</div>
<p>Python is AWESOME because it's so flexible, but it's also slow and memory inefficient! Thus we recommend:</p>
<ol>
<li><strong>Cast early!</strong>: Casting your Python data into native Daft DataTypes if possible - this results in much more efficient downstream data serialization and computation.</li>
<li><strong>Use Python UDFs</strong>: If there is no suitable Daft representation for your Python objects, use Python UDFs to process your Python data and extract the relevant data to be returned as native Daft DataTypes!</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you work with Python classes for a generalizable use-case (e.g. documents, protobufs), it may be that these types are good candidates for "promotion" into a native Daft type! Please get in touch with the Daft team and we would love to work together on building your type into canonical Daft types.</p>
</div>
<h3 id="complex-datatypes">Complex DataTypes<a class="headerlink" href="#complex-datatypes" title="Permanent link">#</a></h3>
<p>Daft supports many more interesting complex DataTypes, for example:</p>
<ul>
<li><a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType.tensor"><code>DataType.tensor()</code></a>: Multi-dimensional (potentially uniformly-shaped) tensors of data</li>
<li><a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType.embedding"><code>DataType.embedding()</code></a>: Lower-dimensional vector representation of data (e.g. words)</li>
<li><a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType.image"><code>DataType.image()</code></a>: NHWC images</li>
</ul>
<p>Daft abstracts away the in-memory representation of your data and provides kernels for many common operations on top of these data types. For supported image operations see the <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/expressions.html#api-expressions-images">image expressions API reference</a>. For more complex algorithms, you can also drop into a Python UDF to process this data using your custom Python libraries.</p>
<p>Please add suggestions for new DataTypes to our Github Discussions page!</p>
<h2 id="sql">SQL<a class="headerlink" href="#sql" title="Permanent link">#</a></h2>
<p>Daft supports Structured Query Language (SQL) as a way of constructing query plans (represented in Python as a <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.html#daft.DataFrame"><code>daft.DataFrame</code></a>) and expressions (<a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.html#daft.DataFrame"><code>daft.Expression</code></a>).</p>
<p>SQL is a human-readable way of constructing these query plans, and can often be more ergonomic than using DataFrames for writing queries.</p>
<div class="admonition tip">
<p class="admonition-title">Daft's SQL support is new and is constantly being improved on!</p>
<p>Please give us feedback or submit an <a href="https://github.com/Eventual-Inc/Daft/issues">issue</a> and we'd love to hear more about what you would like.</p>
</div>
<h3 id="running-sql-on-dataframes">Running SQL on DataFrames<a class="headerlink" href="#running-sql-on-dataframes" title="Permanent link">#</a></h3>
<p>Daft's <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/sql.html#daft.sql"><code>daft.sql</code></a> function will automatically detect any <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.html#daft.DataFrame"><code>daft.DataFrame</code></a> objects in your current Python environment to let you query them easily by name.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="42:1"><input checked="checked" id="__tabbed_42_1" name="__tabbed_42" type="radio" /><div class="tabbed-labels"><label for="__tabbed_42_1">⚙️ SQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># Note the variable name `my_special_df`</span>
<span class="n">my_special_df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>

<span class="c1"># Use the SQL table name &quot;my_special_df&quot; to refer to the above DataFrame!</span>
<span class="n">sql_df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;SELECT A, B FROM my_special_df&quot;</span><span class="p">)</span>

<span class="n">sql_df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────┬───────╮
│ A     ┆ B     │
│ ---   ┆ ---   │
│ Int64 ┆ Int64 │
╞═══════╪═══════╡
│ 1     ┆ 1     │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┤
│ 2     ┆ 2     │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┤
│ 3     ┆ 3     │
╰───────┴───────╯

(Showing first 3 of 3 rows)
</code></pre></div>
<p>In the above example, we query the DataFrame called <code>"my_special_df"</code> by simply referring to it in the SQL command. This produces a new DataFrame <code>sql_df</code> which can
natively integrate with the rest of your Daft query.</p>
<h3 id="reading-data-from-sql">Reading data from SQL<a class="headerlink" href="#reading-data-from-sql" title="Permanent link">#</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This feature is a WIP and will be coming soon! We will support reading common datasources directly from SQL:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="43:1"><input checked="checked" id="__tabbed_43_1" name="__tabbed_43" type="radio" /><div class="tabbed-labels"><label for="__tabbed_43_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM read_parquet(&#39;s3://...&#39;)&quot;</span><span class="p">)</span>
<span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM read_delta_lake(&#39;s3://...&#39;)&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p>Today, a workaround for this is to construct your dataframe in Python first and use it from SQL instead:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="44:1"><input checked="checked" id="__tabbed_44_1" name="__tabbed_44" type="radio" /><div class="tabbed-labels"><label for="__tabbed_44_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;s3://...&quot;</span><span class="p">)</span>
<span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM df&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p>We appreciate your patience with us and hope to deliver this crucial feature soon!</p>
</div>
<h3 id="sql-expressions">SQL Expressions<a class="headerlink" href="#sql-expressions" title="Permanent link">#</a></h3>
<p>SQL has the concept of expressions as well. Here is an example of a simple addition expression, adding columns "a" and "b" in SQL to produce a new column C.</p>
<p>We also present here the equivalent query for SQL and DataFrame. Notice how similar the concepts are!</p>
<div class="tabbed-set tabbed-alternate" data-tabs="45:2"><input checked="checked" id="__tabbed_45_1" name="__tabbed_45" type="radio" /><input id="__tabbed_45_2" name="__tabbed_45" type="radio" /><div class="tabbed-labels"><label for="__tabbed_45_1">⚙️ SQL</label><label for="__tabbed_45_2">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;SELECT A + B as C FROM df&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">expr</span> <span class="o">=</span> <span class="p">(</span><span class="n">daft</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">daft</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────╮
│ C     │
│ ---   │
│ Int64 │
╞═══════╡
│ 2     │
├╌╌╌╌╌╌╌┤
│ 4     │
├╌╌╌╌╌╌╌┤
│ 6     │
╰───────╯

(Showing first 3 of 3 rows)
</code></pre></div>
<p>In the above query, both the SQL version of the query and the DataFrame version of the query produce the same result.</p>
<p>Under the hood, they run the same Expression <code>col("A") + col("B")</code>!</p>
<p>One really cool trick you can do is to use the <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/sql.html#daft.sql_expr"><code>daft.sql_expr</code></a> function as a helper to easily create Expressions. The following are equivalent:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="46:2"><input checked="checked" id="__tabbed_46_1" name="__tabbed_46" type="radio" /><input id="__tabbed_46_2" name="__tabbed_46" type="radio" /><div class="tabbed-labels"><label for="__tabbed_46_1">⚙️ SQL</label><label for="__tabbed_46_2">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">sql_expr</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">sql_expr</span><span class="p">(</span><span class="s2">&quot;A + B as C&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;SQL expression:&quot;</span><span class="p">,</span> <span class="n">sql_expr</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">py_expr</span> <span class="o">=</span> <span class="p">(</span><span class="n">daft</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">daft</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Python expression:&quot;</span><span class="p">,</span> <span class="n">py_expr</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>SQL expression: col(A) + col(B) as C
Python expression: col(A) + col(B) as C
</code></pre></div>
<p>This means that you can pretty much use SQL anywhere you use Python expressions, making Daft extremely versatile at mixing workflows which leverage both SQL and Python.</p>
<p>As an example, consider the filter query below and compare the two equivalent Python and SQL queries:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="47:2"><input checked="checked" id="__tabbed_47_1" name="__tabbed_47" type="radio" /><input id="__tabbed_47_2" name="__tabbed_47" type="radio" /><div class="tabbed-labels"><label for="__tabbed_47_1">⚙️ SQL</label><label for="__tabbed_47_2">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>

<span class="c1"># Daft automatically converts this string using `daft.sql_expr`</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s2">&quot;A &lt; 2&quot;</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>

<span class="c1"># Using Daft&#39;s Python Expression API</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────┬───────╮
│ A     ┆ B     │
│ ---   ┆ ---   │
│ Int64 ┆ Int64 │
╞═══════╪═══════╡
│ 1     ┆ 1     │
╰───────┴───────╯

(Showing first 1 of 1 rows)
</code></pre></div>
<p>Pretty sweet! Of course, this support for running Expressions on your columns extends well beyond arithmetic as we'll see in the next section on SQL Functions.</p>
<h3 id="sql-functions">SQL Functions<a class="headerlink" href="#sql-functions" title="Permanent link">#</a></h3>
<p>SQL also has access to all of Daft's powerful <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.html#daft.DataFrame"><code>daft.Expression</code></a> functionality through SQL functions.</p>
<p>However, unlike the Python Expression API which encourages method-chaining (e.g. <code>col("a").url.download().image.decode()</code>), in SQL you have to do function nesting instead (e.g. <code>"image_decode(url_download(a))"</code>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A full catalog of the available SQL Functions in Daft is available in the <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/sql.html"><code>../api_docs/sql</code></a>.</p>
<p>Note that it closely mirrors the Python API, with some function naming differences vs the available Python methods.
We also have some aliased functions for ANSI SQL-compliance or familiarity to users coming from other common SQL dialects such as PostgreSQL and SparkSQL to easily find their functionality.</p>
</div>
<p>Here is an example of an equivalent function call in SQL vs Python:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="48:2"><input checked="checked" id="__tabbed_48_1" name="__tabbed_48" type="radio" /><input id="__tabbed_48_2" name="__tabbed_48" type="radio" /><div class="tabbed-labels"><label for="__tabbed_48_1">⚙️ SQL</label><label for="__tabbed_48_2">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;urls&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;https://user-images.githubusercontent.com/17691182/190476440-28f29e87-8e3b-41c4-9c28-e112e595f558.png&quot;</span><span class="p">,</span>
    <span class="s2">&quot;https://user-images.githubusercontent.com/17691182/190476440-28f29e87-8e3b-41c4-9c28-e112e595f558.png&quot;</span><span class="p">,</span>
    <span class="s2">&quot;https://user-images.githubusercontent.com/17691182/190476440-28f29e87-8e3b-41c4-9c28-e112e595f558.png&quot;</span><span class="p">,</span>
<span class="p">]})</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s2">&quot;SELECT image_decode(url_download(urls)) FROM df&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span><span class="s2">&quot;urls&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;https://user-images.githubusercontent.com/17691182/190476440-28f29e87-8e3b-41c4-9c28-e112e595f558.png&quot;</span><span class="p">,</span>
    <span class="s2">&quot;https://user-images.githubusercontent.com/17691182/190476440-28f29e87-8e3b-41c4-9c28-e112e595f558.png&quot;</span><span class="p">,</span>
    <span class="s2">&quot;https://user-images.githubusercontent.com/17691182/190476440-28f29e87-8e3b-41c4-9c28-e112e595f558.png&quot;</span><span class="p">,</span>
<span class="p">]})</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">daft</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;urls&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">download</span><span class="p">()</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭──────────────╮
│ urls         │
│ ---          │
│ Image[MIXED] │
╞══════════════╡
│ &lt;Image&gt;      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ &lt;Image&gt;      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ &lt;Image&gt;      │
╰──────────────╯

(Showing first 3 of 3 rows)
</code></pre></div>
<h2 id="aggregations-and-grouping">Aggregations and Grouping<a class="headerlink" href="#aggregations-and-grouping" title="Permanent link">#</a></h2>
<p>Some operations such as the sum or the average of a column are called <strong>aggregations</strong>. Aggregations are operations that reduce the number of rows in a column.</p>
<h3 id="global-aggregations">Global Aggregations<a class="headerlink" href="#global-aggregations" title="Permanent link">#</a></h3>
<p>An aggregation can be applied on an entire DataFrame, for example to get the mean on a specific column:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="49:1"><input checked="checked" id="__tabbed_49_1" name="__tabbed_49" type="radio" /><div class="tabbed-labels"><label for="__tabbed_49_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">daft</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span>
    <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mf">20.</span><span class="p">,</span> <span class="mf">30.</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span>
<span class="p">})</span>

<span class="n">df</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="s2">&quot;score&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭─────────╮
│ score   │
│ ---     │
│ Float64 │
╞═════════╡
│ 25      │
╰─────────╯

(Showing first 1 of 1 rows)
</code></pre></div>
<p>For a full list of available Dataframe aggregations, see <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/dataframe.html#df-aggregations">Aggregations</a>.</p>
<p>Aggregations can also be mixed and matched across columns, via the <code>agg</code> method:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="50:1"><input checked="checked" id="__tabbed_50_1" name="__tabbed_50" type="radio" /><div class="tabbed-labels"><label for="__tabbed_50_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;mean_score&quot;</span><span class="p">),</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;max_score&quot;</span><span class="p">),</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;class&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;class_count&quot;</span><span class="p">),</span>
<span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭────────────┬───────────┬─────────────╮
│ mean_score ┆ max_score ┆ class_count │
│ ---        ┆ ---       ┆ ---         │
│ Float64    ┆ Float64   ┆ UInt64      │
╞════════════╪═══════════╪═════════════╡
│ 25         ┆ 40        ┆ 4           │
╰────────────┴───────────┴─────────────╯

(Showing first 1 of 1 rows)
</code></pre></div>
<p>For a full list of available aggregation expressions, see <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/expressions.html#api-aggregation-expression">Aggregation Expressions</a></p>
<h3 id="grouped-aggregations">Grouped Aggregations<a class="headerlink" href="#grouped-aggregations" title="Permanent link">#</a></h3>
<p>Aggregations can also be called on a "Grouped DataFrame". For the above example, perhaps we want to get the mean "score" not for the entire DataFrame, but for each "class".</p>
<p>Let's run the mean of column "score" again, but this time grouped by "class":</p>
<div class="tabbed-set tabbed-alternate" data-tabs="51:1"><input checked="checked" id="__tabbed_51_1" name="__tabbed_51" type="radio" /><div class="tabbed-labels"><label for="__tabbed_51_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="s2">&quot;score&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────┬─────────╮
│ class ┆ score   │
│ ---   ┆ ---     │
│ Utf8  ┆ Float64 │
╞═══════╪═════════╡
│ a     ┆ 15      │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ b     ┆ 35      │
╰───────┴─────────╯

(Showing first 2 of 2 rows)
</code></pre></div>
<p>To run multiple aggregations on a Grouped DataFrame, you can use the <code>agg</code> method:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="52:1"><input checked="checked" id="__tabbed_52_1" name="__tabbed_52" type="radio" /><div class="tabbed-labels"><label for="__tabbed_52_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;mean_score&quot;</span><span class="p">),</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;max_score&quot;</span><span class="p">),</span>
<span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>╭───────┬────────────┬───────────╮
│ class ┆ mean_score ┆ max_score │
│ ---   ┆ ---        ┆ ---       │
│ Utf8  ┆ Float64    ┆ Float64   │
╞═══════╪════════════╪═══════════╡
│ a     ┆ 15         ┆ 20        │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌┤
│ b     ┆ 35         ┆ 40        │
╰───────┴────────────┴───────────╯

(Showing first 2 of 2 rows)
</code></pre></div>
<h2 id="user-defined-functions-udf">User-Defined Functions (UDF)<a class="headerlink" href="#user-defined-functions-udf" title="Permanent link">#</a></h2>
<p>A key piece of functionality in Daft is the ability to flexibly define custom functions that can run computations on any data in your dataframe. This section walks you through the different types of UDFs that Daft allows you to run.</p>
<p>Let's first create a dataframe that will be used as a running example throughout this tutorial!</p>
<div class="tabbed-set tabbed-alternate" data-tabs="53:1"><input checked="checked" id="__tabbed_53_1" name="__tabbed_53" type="radio" /><div class="tabbed-labels"><label for="__tabbed_53_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">daft</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">daft</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">({</span>
    <span class="c1"># the `image` column contains images represented as 2D numpy arrays</span>
    <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">)],</span>
    <span class="c1"># the `crop` column contains a box to crop from our image, represented as a list of integers: [x1, x2, y1, y2]</span>
    <span class="s2">&quot;crop&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">)],</span>
<span class="p">})</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="per-column-per-row-functions-using-apply">Per-column per-row functions using <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/expression_methods/daft.Expression.apply.html"><code>.apply</code></a><a class="headerlink" href="#per-column-per-row-functions-using-apply" title="Permanent link">#</a></h3>
<p>You can use <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/expression_methods/daft.Expression.apply.html"><code>.apply</code></a> to run a Python function on every row in a column.</p>
<p>For example, the following example creates a new <code>flattened_image</code> column by calling <code>.flatten()</code> on every object in the <code>image</code> column.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="54:1"><input checked="checked" id="__tabbed_54_1" name="__tabbed_54" type="radio" /><div class="tabbed-labels"><label for="__tabbed_54_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span>
    <span class="s2">&quot;flattened_image&quot;</span><span class="p">,</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">img</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">return_dtype</span><span class="o">=</span><span class="n">daft</span><span class="o">.</span><span class="n">DataType</span><span class="o">.</span><span class="n">python</span><span class="p">())</span>
<span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>+----------------------+---------------+---------------------+
| image                | crop          | flattened_image     |
| Python               | List[Int64]   | Python              |
+======================+===============+=====================+
| [[1. 1. 1. ... 1. 1. | [0, 1, 0, 1]  | [1. 1. 1. ... 1. 1. |
| 1.]  [1. 1. 1. ...   |               | 1.]                 |
| 1. 1. 1.]  [1. 1.... |               |                     |
+----------------------+---------------+---------------------+
| [[1. 1. 1. ... 1. 1. | [0, 1, 0, 1]  | [1. 1. 1. ... 1. 1. |
| 1.]  [1. 1. 1. ...   |               | 1.]                 |
| 1. 1. 1.]  [1. 1.... |               |                     |
+----------------------+---------------+---------------------+
(Showing first 2 rows)
</code></pre></div>
<p>Note here that we use the <code>return_dtype</code> keyword argument to specify that our returned column type is a Python column!</p>
<h3 id="multi-column-per-partition-functions-using-udf">Multi-column per-partition functions using <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/udf.html#creating-udfs"><code>@udf</code></a><a class="headerlink" href="#multi-column-per-partition-functions-using-udf" title="Permanent link">#</a></h3>
<p><a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/expression_methods/daft.Expression.apply.html"><code>.apply</code></a> is great for convenience, but has two main limitations:</p>
<ol>
<li>It can only run on single columns</li>
<li>It can only run on single items at a time</li>
</ol>
<p>Daft provides the <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/udf.html#creating-udfs"><code>@udf</code></a> decorator for defining your own UDFs that process multiple columns or multiple rows at a time.</p>
<p>For example, let's try writing a function that will crop all our images in the <code>image</code> column by its corresponding value in the <code>crop</code> column:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="55:1"><input checked="checked" id="__tabbed_55_1" name="__tabbed_55" type="radio" /><div class="tabbed-labels"><label for="__tabbed_55_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nd">@daft</span><span class="o">.</span><span class="n">udf</span><span class="p">(</span><span class="n">return_dtype</span><span class="o">=</span><span class="n">daft</span><span class="o">.</span><span class="n">DataType</span><span class="o">.</span><span class="n">python</span><span class="p">())</span>
<span class="k">def</span><span class="w"> </span><span class="nf">crop_images</span><span class="p">(</span><span class="n">images</span><span class="p">,</span> <span class="n">crops</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="n">cropped</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">img</span><span class="p">,</span> <span class="n">crop</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">images</span><span class="o">.</span><span class="n">to_pylist</span><span class="p">(),</span> <span class="n">crops</span><span class="o">.</span><span class="n">to_pylist</span><span class="p">()):</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">crop</span>
        <span class="n">cropped_img</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="n">x1</span><span class="p">:</span><span class="n">x2</span> <span class="o">+</span> <span class="n">padding</span><span class="p">,</span> <span class="n">y1</span><span class="p">:</span><span class="n">y2</span> <span class="o">+</span> <span class="n">padding</span><span class="p">]</span>
        <span class="n">cropped</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cropped_img</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cropped</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span>
    <span class="s2">&quot;cropped&quot;</span><span class="p">,</span>
    <span class="n">crop_images</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;crop&quot;</span><span class="p">],</span> <span class="n">padding</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>+----------------------+---------------+--------------------+
| image                | crop          | cropped            |
| Python               | List[Int64]   | Python             |
+======================+===============+====================+
| [[1. 1. 1. ... 1. 1. | [0, 1, 0, 1]  | [[1. 1.]  [1. 1.]] |
| 1.]  [1. 1. 1. ...   |               |                    |
| 1. 1. 1.]  [1. 1.... |               |                    |
+----------------------+---------------+--------------------+
| [[1. 1. 1. ... 1. 1. | [0, 1, 0, 1]  | [[1. 1.]  [1. 1.]] |
| 1.]  [1. 1. 1. ...   |               |                    |
| 1. 1. 1.]  [1. 1.... |               |                    |
+----------------------+---------------+--------------------+
(Showing first 2 rows)
</code></pre></div>
<p>There's a few things happening here, let's break it down:</p>
<ol>
<li>
<p><code>crop_images</code> is a normal Python function. It takes as input:</p>
<p>a. A list of images: <code>images</code></p>
<p>b. A list of cropping boxes: <code>crops</code></p>
<p>c. An integer indicating how much padding to apply to the right and bottom of the cropping: <code>padding</code></p>
</li>
<li>
<p>To allow Daft to pass column data into the <code>images</code> and <code>crops</code> arguments, we decorate the function with <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/udf.html#creating-udfs"><code>@udf</code></a></p>
<p>a. <code>return_dtype</code> defines the returned data type. In this case, we return a column containing Python objects of numpy arrays</p>
<p>b. At runtime, because we call the UDF on the <code>image</code> and <code>crop</code> columns, the UDF will receive a <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/series.html#daft.Series"><code>daft.Series</code></a> object for each argument.</p>
</li>
<li>
<p>We can create a new column in our DataFrame by applying our UDF on the <code>"image"</code> and <code>"crop"</code> columns inside of a <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/dataframe_methods/daft.DataFrame.with_column.html#daft.DataFrame.with_column"><code>df.with_column()</code></a> call.</p>
</li>
</ol>
<h4 id="udf-inputs">UDF Inputs<a class="headerlink" href="#udf-inputs" title="Permanent link">#</a></h4>
<p>When you specify an Expression as an input to a UDF, Daft will calculate the result of that Expression and pass it into your function as a <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/series.html#daft.Series"><code>daft.Series</code></a> object.</p>
<p>The Daft <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/series.html#daft.Series"><code>daft.Series</code></a> is just an abstraction on a "column" of data! You can obtain several different data representations from a <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/series.html#daft.Series"><code>daft.Series</code></a>:</p>
<ol>
<li>PyArrow Arrays (<code>pa.Array</code>): <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/series.html#daft.Series.to_arrow"><code>s.to_arrow()</code></a></li>
<li>Python lists (<code>list</code>): <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/series.html#daft.Series.to_pylist"><code>s.to_pylist()</code></a></li>
</ol>
<p>Depending on your application, you may choose a different data representation that is more performant or more convenient!</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Certain array formats have some restrictions around the type of data that they can handle:</p>
<ol>
<li>
<p><strong>Null Handling</strong>: In Pandas and Numpy, nulls are represented as NaNs for numeric types, and Nones for non-numeric types. Additionally, the existence of nulls will trigger a type casting from integer to float arrays. If null handling is important to your use-case, we recommend using one of the other available options.</p>
</li>
<li>
<p><strong>Python Objects</strong>: PyArrow array formats cannot support Python columns.</p>
</li>
</ol>
<p>We recommend using Python lists if performance is not a major consideration, and using the arrow-native formats such as PyArrow arrays and numpy arrays if performance is important.</p>
</div>
<h4 id="return-types">Return Types<a class="headerlink" href="#return-types" title="Permanent link">#</a></h4>
<p>The <code>return_dtype</code> argument specifies what type of column your UDF will return. Types can be specified using the <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/datatype.html#daft.DataType"><code>daft.DataType</code></a> class.</p>
<p>Your UDF function itself needs to return a batch of columnar data, and can do so as any one of the following array types:</p>
<ol>
<li>Numpy Arrays (<code>np.ndarray</code>)</li>
<li>PyArrow Arrays (<code>pa.Array</code>)</li>
<li>Python lists (<code>list</code>)</li>
</ol>
<p>Note that if the data you have returned is not castable to the return_dtype that you specify (e.g. if you return a list of floats when you've specified a <code>return_dtype=DataType.bool()</code>), Daft will throw a runtime error!</p>
<h3 id="class-udfs">Class UDFs<a class="headerlink" href="#class-udfs" title="Permanent link">#</a></h3>
<p>UDFs can also be created on Classes, which allow for initialization on some expensive state that can be shared between invocations of the class, for example downloading data or creating a model.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="56:1"><input checked="checked" id="__tabbed_56_1" name="__tabbed_56" type="radio" /><div class="tabbed-labels"><label for="__tabbed_56_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nd">@daft</span><span class="o">.</span><span class="n">udf</span><span class="p">(</span><span class="n">return_dtype</span><span class="o">=</span><span class="n">daft</span><span class="o">.</span><span class="n">DataType</span><span class="o">.</span><span class="n">int64</span><span class="p">())</span>
<span class="k">class</span><span class="w"> </span><span class="nc">RunModel</span><span class="p">:</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Perform expensive initializations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">=</span> <span class="n">create_model</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">features_col</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">(</span><span class="n">features_col</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p>Running Class UDFs are exactly the same as running their functional cousins.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="57:1"><input checked="checked" id="__tabbed_57_1" name="__tabbed_57" type="radio" /><div class="tabbed-labels"><label for="__tabbed_57_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">&quot;image_classifications&quot;</span><span class="p">,</span> <span class="n">RunModel</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;images&quot;</span><span class="p">]))</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="resource-requests">Resource Requests<a class="headerlink" href="#resource-requests" title="Permanent link">#</a></h3>
<p>Sometimes, you may want to request for specific resources for your UDF. For example, some UDFs need one GPU to run as they will load a model onto the GPU.</p>
<p>To do so, you can create your UDF and assign it a resource request:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="58:1"><input checked="checked" id="__tabbed_58_1" name="__tabbed_58" type="radio" /><div class="tabbed-labels"><label for="__tabbed_58_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nd">@daft</span><span class="o">.</span><span class="n">udf</span><span class="p">(</span><span class="n">return_dtype</span><span class="o">=</span><span class="n">daft</span><span class="o">.</span><span class="n">DataType</span><span class="o">.</span><span class="n">int64</span><span class="p">(),</span> <span class="n">num_gpus</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">RunModelWithOneGPU</span><span class="p">:</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Perform expensive initializations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">=</span> <span class="n">create_model</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">features_col</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">(</span><span class="n">features_col</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span>
    <span class="s2">&quot;image_classifications&quot;</span><span class="p">,</span>
    <span class="n">RunModelWithOneGPU</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;images&quot;</span><span class="p">]),</span>
<span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p>In the above example, if Daft ran on a Ray cluster consisting of 8 GPUs and 64 CPUs, Daft would be able to run 8 replicas of your UDF in parallel, thus massively increasing the throughput of your UDF!</p>
<p>UDFs can also be parametrized with new resource requests after being initialized.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="59:1"><input checked="checked" id="__tabbed_59_1" name="__tabbed_59" type="radio" /><div class="tabbed-labels"><label for="__tabbed_59_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">RunModelWithTwoGPUs</span> <span class="o">=</span> <span class="n">RunModelWithOneGPU</span><span class="o">.</span><span class="n">override_options</span><span class="p">(</span><span class="n">num_gpus</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span>
    <span class="s2">&quot;image_classifications&quot;</span><span class="p">,</span>
    <span class="n">RunModelWithTwoGPUs</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;images&quot;</span><span class="p">]),</span>
<span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="example-udfs-in-ml-workloads">Example: UDFs in ML Workloads<a class="headerlink" href="#example-udfs-in-ml-workloads" title="Permanent link">#</a></h3>
<p>We’ll define a function that uses a pre-trained PyTorch model: <a href="https://pytorch.org/vision/main/models/generated/torchvision.models.resnet50.html">ResNet50</a> to classify the dog pictures. We’ll pass the contents of the image <code>urls</code> column and send the classification predictions to a new column <code>classify_breed</code>.</p>
<p>Working with PyTorch adds some complexity but you can just run the cells below to perform the classification.</p>
<p>First, make sure to install and import some extra dependencies:</p>
<div class="highlight"><pre><span></span><code>%pip<span class="w"> </span>install<span class="w"> </span>validators<span class="w"> </span>matplotlib<span class="w"> </span>Pillow<span class="w"> </span>torch<span class="w"> </span>torchvision
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="60:1"><input checked="checked" id="__tabbed_60_1" name="__tabbed_60" type="radio" /><div class="tabbed-labels"><label for="__tabbed_60_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># import additional libraries, these are necessary for PyTorch</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">torch</span>
</code></pre></div>
</div>
</div>
</div>
<p>Define your <code>ClassifyImages</code> UDF. Models are expensive to initialize and load, so we want to do this as few times as possible, and share a model across multiple invocations.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="61:1"><input checked="checked" id="__tabbed_61_1" name="__tabbed_61" type="radio" /><div class="tabbed-labels"><label for="__tabbed_61_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nd">@udf</span><span class="p">(</span><span class="n">return_dtype</span><span class="o">=</span><span class="n">DataType</span><span class="o">.</span><span class="n">fixed_size_list</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="n">DataType</span><span class="o">.</span><span class="n">string</span><span class="p">(),</span> <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ClassifyImages</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Perform expensive initializations - create and load the pre-trained model</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">hub</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;NVIDIA/DeepLearningExamples:torchhub&quot;</span><span class="p">,</span> <span class="s2">&quot;nvidia_resnet50&quot;</span><span class="p">,</span> <span class="n">pretrained</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">utils</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">hub</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;NVIDIA/DeepLearningExamples:torchhub&quot;</span><span class="p">,</span> <span class="s2">&quot;nvidia_convnets_processing_utils&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">eval</span><span class="p">()</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">images_urls</span><span class="p">):</span>
        <span class="n">uris</span> <span class="o">=</span> <span class="n">images_urls</span><span class="o">.</span><span class="n">to_pylist</span><span class="p">()</span>
        <span class="n">batch</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">cat</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">prepare_input_from_uri</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span> <span class="k">for</span> <span class="n">uri</span> <span class="ow">in</span> <span class="n">uris</span><span class="p">])</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">))</span>

        <span class="k">with</span> <span class="n">torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">():</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">functional</span><span class="o">.</span><span class="n">softmax</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">(</span><span class="n">batch</span><span class="p">),</span> <span class="n">dim</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">pick_n_best</span><span class="p">(</span><span class="n">predictions</span><span class="o">=</span><span class="n">output</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>
</code></pre></div>
</div>
</div>
</div>
<p>Now you're ready to call this function on the <code>urls</code> column and store the outputs in a new column we'll call <code>classify_breed</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="62:1"><input checked="checked" id="__tabbed_62_1" name="__tabbed_62" type="radio" /><div class="tabbed-labels"><label for="__tabbed_62_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">classified_images_df</span> <span class="o">=</span> <span class="n">df_family</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">&quot;classify_breed&quot;</span><span class="p">,</span> <span class="n">ClassifyImages</span><span class="p">(</span><span class="n">daft</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;urls&quot;</span><span class="p">)))</span>
<span class="n">classified_images_df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;dog_name&quot;</span><span class="p">,</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="s2">&quot;classify_breed&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="admonition failure">
<p class="admonition-title">todo(docs): Insert table of dog urls? or new UDF example?</p>
</div>
<h2 id="multimodal-data">Multimodal Data<a class="headerlink" href="#multimodal-data" title="Permanent link">#</a></h2>
<p>Daft is built to work comfortably with multimodal data types, including URLs and images. You can use the <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/expression_methods/daft.Expression.url.download.html#daft.Expression.url.download"><code>url.download()</code></a> expression to download the bytes from a URL. Let’s store them in a new column using the <code>with_column</code> method:</p>
<div class="admonition failure">
<p class="admonition-title">todo(docs): This example is originally from 10min quickstart</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="63:1"><input checked="checked" id="__tabbed_63_1" name="__tabbed_63" type="radio" /><div class="tabbed-labels"><label for="__tabbed_63_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df_family</span> <span class="o">=</span> <span class="n">df_family</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">&quot;image_bytes&quot;</span><span class="p">,</span> <span class="n">df_dogs</span><span class="p">[</span><span class="s2">&quot;urls&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">on_error</span><span class="o">=</span><span class="s2">&quot;null&quot;</span><span class="p">))</span>
<span class="n">df_family</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>+-------------------+---------+----------+------------------------------------------------------------------+--------------------------------------------+
| full_name         | has_dog | dog_name | urls                                                             | image_bytes                                |
| Utf8              | Boolean | Utf8     | Utf8                                                             | Binary                                     |
+-------------------+---------+----------+------------------------------------------------------------------+--------------------------------------------+
| Ernesto Evergreen | true    | Ernie    | https://live.staticflickr.com/65535/53671838774_03ba68d203_o.jpg | b&quot;\xff\xd8\xff\xe0\x00\x10JFIF\x00\x01&quot;... |
| James Jale        | true    | Jackie   | https://live.staticflickr.com/65535/53671700073_2c9441422e_o.jpg | b&quot;\xff\xd8\xff\xe0\x00\x10JFIF\x00\x01&quot;... |
| Wolfgang Winter   | true    | Wolfie   | https://live.staticflickr.com/65535/53670606332_1ea5f2ce68_o.jpg | b&quot;\xff\xd8\xff\xe0\x00\x10JFIF\x00\x01&quot;... |
| Shandra Shamas    | true    | Shaggie  | https://live.staticflickr.com/65535/53671838039_b97411a441_o.jpg | b&quot;\xff\xd8\xff\xe0\x00\x10JFIF\x00\x01&quot;... |
| Zaya Zaphora      | true    | Zadie    | https://live.staticflickr.com/65535/53671698613_0230f8af3c_o.jpg | b&quot;\xff\xd8\xff\xe0\x00\x10JFIF\x00\x01&quot;... |
+-------------------+---------+----------+------------------------------------------------------------------+--------------------------------------------+
(Showing first 5 of 5 rows)
</code></pre></div>
<p>Let’s turn the bytes into human-readable images using <a href="https://www.getdaft.io/projects/docs/en/stable/api_docs/doc_gen/expression_methods/daft.Expression.image.decode.html"><code>image.decode()</code></a>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="64:1"><input checked="checked" id="__tabbed_64_1" name="__tabbed_64" type="radio" /><div class="tabbed-labels"><label for="__tabbed_64_1">🐍 Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">df_family</span> <span class="o">=</span> <span class="n">df_family</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="n">daft</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;image_bytes&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
<span class="n">df_family</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<div class="admonition failure">
<p class="admonition-title">todo(docs): This example is originally from 10min quickstart. Insert dog images or create new example?</p>
</div>
<h2 id="whats-next">What's Next?<a class="headerlink" href="#whats-next" title="Permanent link">#</a></h2>
<h3 id="integrations">Integrations<a class="headerlink" href="#integrations" title="Permanent link">#</a></h3>
<div class="grid cards">
<ul>
<li><a href="../integrations/ray/"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.153 12.826c-.63-.183-1.03.15-1.378.846-.58 1.13-1.643 1.644-2.888 1.594s-2.257-.63-2.788-1.776c-.233-.498-.498-.664-1.046-.68-.93-.017-1.643.016-2.174 1.062-.631 1.261-2.258 1.693-3.619 1.261a3.234 3.234 0 0 1-2.257-3.22 3.2 3.2 0 0 1 2.29-3.02 3.28 3.28 0 0 1 3.702 1.327c.216.315.216.863.597.93.648.1 1.328.033 1.992.033.299 0 .316-.266.399-.465.58-1.295 1.61-1.959 2.987-1.975 1.361-.017 2.39.647 2.955 1.892.215.465.48.598.946.548.166-.017.332.016.498 0 .464-.083 1.062.282 1.344-.448s-.382-.913-.68-1.245c-.847-.946-1.81-1.793-2.673-2.706-.415-.465-.763-.614-1.41-.415-1.876.614-3.619-.431-4.15-2.357-.448-1.676.714-3.535 2.44-3.917a3.293 3.293 0 0 1 3.95 2.457c.017.05.017.083.033.133.117.564.117 1.145-.132 1.626-.283.531-.133.83.249 1.195a153 153 0 0 1 3.286 3.27c.299.299.498.349.913.2 1.51-.565 2.97-.1 3.884 1.161a3.27 3.27 0 0 1-.067 3.801c-.896 1.195-2.357 1.643-3.834 1.079-.381-.15-.58-.1-.846.182a164 164 0 0 1-3.403 3.386c-.299.3-.415.532-.232.98a3.2 3.2 0 0 1-1.278 3.917A3.3 3.3 0 0 1 9.646 23c-1.062-1.062-1.228-2.688-.415-4.033a3.196 3.196 0 0 1 3.835-1.294c.498.182.78.083 1.145-.283 1.012-1.045 2.058-2.058 3.087-3.103.266-.266.68-.449.432-1.03-.233-.547-.631-.414-1.03-.431zM11.97 4.942c.913.016 1.643-.714 1.66-1.627v-.05a1.646 1.646 0 0 0-1.76-1.56 1.63 1.63 0 0 0-1.543 1.527 1.64 1.64 0 0 0 1.577 1.71zm.033 5.41a1.66 1.66 0 0 0-1.676 1.61v.084a1.73 1.73 0 0 0 1.643 1.66c.847.016 1.643-.78 1.677-1.627a1.65 1.65 0 0 0-1.577-1.71c-.017-.016-.05-.016-.067-.016zm7.088 1.694c.016.896.747 1.61 1.626 1.643a1.723 1.723 0 0 0 1.66-1.726 1.666 1.666 0 0 0-1.66-1.61 1.623 1.623 0 0 0-1.643 1.577c.017.05.017.083.017.116M3.24 10.353a1.69 1.69 0 0 0-1.66 1.626c-.017.847.863 1.727 1.693 1.71a1.687 1.687 0 0 0 1.626-1.743 1.615 1.615 0 0 0-1.643-1.593Zm8.68 12c.98.033 1.71-.647 1.727-1.593a1.646 1.646 0 0 0-1.51-1.793 1.646 1.646 0 0 0-1.793 1.51v.233a1.61 1.61 0 0 0 1.543 1.66c0-.017.017-.017.033-.017"/></svg></span> <strong>Ray</strong></a></li>
<li><a href="../integrations/unity_catalog/"><strong>Unity Catalog</strong></a></li>
<li><a href="../integrations/iceberg/"><strong>Apache Iceberg</strong></a></li>
<li><a href="../integrations/delta_lake/"><strong>Delta Lake</strong></a></li>
<li><a href="../integrations/azure/"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.05 4.24 6.56 18.05 2 18l5.09-8.76zm.7 1.09L22 19.76H6.74l9.3-1.66-4.87-5.79z"/></svg></span> <strong>Microsoft Azure</strong></a></li>
<li><a href="../integrations/aws/"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M180.41 203.01c-.72 22.65 10.6 32.68 10.88 39.05a8.16 8.16 0 0 1-4.1 6.27l-12.8 8.96a10.66 10.66 0 0 1-5.63 1.92c-.43-.02-8.19 1.83-20.48-25.61a78.6 78.6 0 0 1-62.61 29.45c-16.28.89-60.4-9.24-58.13-56.21-1.59-38.28 34.06-62.06 70.93-60.05 7.1.02 21.6.37 46.99 6.27v-15.62c2.69-26.46-14.7-46.99-44.81-43.91-2.4.01-19.4-.5-45.84 10.11-7.36 3.38-8.3 2.82-10.75 2.82-7.41 0-4.36-21.48-2.94-24.2 5.21-6.4 35.86-18.35 65.94-18.18a76.86 76.86 0 0 1 55.69 17.28 70.29 70.29 0 0 1 17.67 52.36zM93.99 235.4c32.43-.47 46.16-19.97 49.29-30.47 2.46-10.05 2.05-16.41 2.05-27.4-9.67-2.32-23.59-4.85-39.56-4.87-15.15-1.14-42.82 5.63-41.74 32.26-1.24 16.79 11.12 31.4 29.96 30.48m170.92 23.05c-7.86.72-11.52-4.86-12.68-10.37l-49.8-164.65c-.97-2.78-1.61-5.65-1.92-8.58a4.61 4.61 0 0 1 3.86-5.25c.24-.04-2.13 0 22.25 0 8.78-.88 11.64 6.03 12.55 10.37l35.72 140.83 33.16-140.83c.53-3.22 2.94-11.07 12.8-10.24h17.16c2.17-.18 11.11-.5 12.68 10.37l33.42 142.63L420.98 80.1c.48-2.18 2.72-11.37 12.68-10.37h19.72c.85-.13 6.15-.81 5.25 8.58-.43 1.85 3.41-10.66-52.75 169.9-1.15 5.51-4.82 11.09-12.68 10.37h-18.69c-10.94 1.15-12.51-9.66-12.68-10.75L328.67 110.7l-32.78 136.99c-.16 1.09-1.73 11.9-12.68 10.75h-18.3zm273.48 5.63c-5.88.01-33.92-.3-57.36-12.29a12.8 12.8 0 0 1-7.81-11.91v-10.75c0-8.45 6.2-6.9 8.83-5.89 10.04 4.06 16.48 7.14 28.81 9.6 36.65 7.53 52.77-2.3 56.72-4.48 13.15-7.81 14.19-25.68 5.25-34.95-10.48-8.79-15.48-9.12-53.13-21-4.64-1.29-43.7-13.61-43.79-52.36-.61-28.24 25.05-56.18 69.52-55.95 12.67-.01 46.43 4.13 55.57 15.62 1.35 2.09 2.02 4.55 1.92 7.04v10.11c0 4.44-1.62 6.66-4.87 6.66-7.71-.86-21.39-11.17-49.16-10.75-6.89-.36-39.89.91-38.41 24.97-.43 18.96 26.61 26.07 29.7 26.89 36.46 10.97 48.65 12.79 63.12 29.58 17.14 22.25 7.9 48.3 4.35 55.44-19.08 37.49-68.42 34.44-69.26 34.42m40.2 104.86c-70.03 51.72-171.69 79.25-258.49 79.25A469.13 469.13 0 0 1 2.83 327.46c-6.53-5.89-.77-13.96 7.17-9.47a637.37 637.37 0 0 0 316.88 84.12 630.2 630.2 0 0 0 241.59-49.55c11.78-5 21.77 7.8 10.12 16.38m29.19-33.29c-8.96-11.52-59.28-5.38-81.81-2.69-6.79.77-7.94-5.12-1.79-9.47 40.07-28.17 105.88-20.1 113.44-10.63 7.55 9.47-2.05 75.41-39.56 106.91-5.76 4.87-11.27 2.3-8.71-4.1 8.44-21.25 27.39-68.49 18.43-80.02"/></svg></span> <strong>Amazon Web Services (AWS)</strong></a></li>
<li><a href="../integrations/sql/"><strong>SQL</strong></a></li>
<li><a href="../integrations/huggingface/"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M1.445 11.506c0 1.102.167 2.158.484 3.156-.038-.003-.069-.006-.106-.006-.42 0-.801.16-1.07.452-.345.373-.498.833-.431 1.293a1.6 1.6 0 0 0 .214.597 1.43 1.43 0 0 0-.484.758c-.065.245-.131.754.215 1.28a2 2 0 0 0-.063.105c-.208.392-.22.837-.037 1.25.279.626.97 1.118 2.313 1.647.835.329 1.599.54 1.605.543 1.105.284 2.104.427 2.97.427 1.417 0 2.475-.384 3.152-1.144 1.538.265 2.79.14 3.592.006.677.755 1.733 1.139 3.147 1.139.864 0 1.864-.143 2.969-.428.006-.002.77-.214 1.605-.543 1.343-.53 2.034-1.021 2.313-1.647a1.4 1.4 0 0 0-.037-1.25 2 2 0 0 0-.063-.105c.346-.525.28-1.035.215-1.28a1.43 1.43 0 0 0-.484-.758q.166-.27.215-.597c.066-.46-.087-.92-.432-1.293a1.43 1.43 0 0 0-1.07-.452l-.06.002c.317-.996.485-2.052.485-3.152 0-5.807-4.736-10.514-10.579-10.514-5.842 0-10.578 4.707-10.578 10.514m10.578-9.483c5.273 0 9.548 4.246 9.548 9.483a9.4 9.4 0 0 1-.27 2.236l-.011-.015a1.42 1.42 0 0 0-1.108-.506c-.352 0-.714.115-1.076.344-.24.151-.506.422-.78.76-.253-.35-.607-.584-1.013-.647a1.5 1.5 0 0 0-.235-.018c-.926 0-1.482.8-1.693 1.518-.105.243-.607 1.348-1.361 2.098-1.169 1.16-1.446 2.353-.84 3.638a9.3 9.3 0 0 1-2.365-.006c.59-1.212.363-2.439-.843-3.632-.755-.75-1.256-1.855-1.361-2.098-.21-.718-.767-1.518-1.694-1.518q-.117 0-.234.018c-.406.063-.76.297-1.014.646-.273-.337-.539-.608-.779-.76-.362-.228-.724-.343-1.076-.343-.427 0-.81.17-1.082.478a9.4 9.4 0 0 1-.26-2.193c0-5.237 4.275-9.483 9.547-9.483m-3.379 4.98a1.36 1.36 0 0 0-.629 2.563c.351.186.489-.526.836-.648.311-.11.841.399 1.008.086a1.36 1.36 0 0 0-.562-1.84 1.37 1.37 0 0 0-.653-.16m6.84 0a1.36 1.36 0 0 0-1.215 2c.168.314.698-.195 1.009-.085.347.122.486.835.838.648a1.36 1.36 0 0 0 .562-1.84 1.37 1.37 0 0 0-1.193-.722M5.729 8.423a.877.877 0 0 0-.877.877c0 .484.393.877.877.877a.877.877 0 0 0 .877-.877.877.877 0 0 0-.877-.877m12.644 0a.88.88 0 0 0-.88.877c0 .484.395.877.88.877a.877.877 0 0 0 .876-.877.877.877 0 0 0-.877-.877m-9.58 3.037c-.178-.003-.279.11-.279.416 0 .81.388 2.125 1.428 2.924.207-.712 1.346-1.283 1.508-1.201.232.116.22.441.608.726.388-.285.374-.61.605-.726.163-.082 1.301.489 1.508 1.201 1.04-.799 1.428-2.114 1.428-2.924 0-1.221-1.583.64-3.541.649-1.469-.007-2.727-1.056-3.264-1.065m-4.48 3.018c.58.365 1.696 2.275 2.106 3.018a.66.66 0 0 0 .582.353c.418 0 .746-.414.039-.94-1.064-.79-.692-2.084-.184-2.164a.4.4 0 0 1 .066-.004c.462 0 .666.79.666.79s.596 1.49 1.622 2.508c.942.935 1.062 1.703.496 2.666-.016-.004-.016.023-.148.215a1.9 1.9 0 0 1-.72.615c-.505.227-1.139.27-1.783.27-1.037 0-2.101-.183-2.697-.337-.03-.007-3.65-.956-3.192-1.822.077-.145.204-.203.364-.203.646 0 1.823.955 2.328.955.113 0 .196-.086.228-.203.225-.805-3.278-1.052-2.984-2.164.052-.197.193-.276.39-.276.854 0 2.77 1.493 3.173 1.493q.046 0 .064-.028c.201-.322.11-.586-1.309-1.44-1.418-.853-2.431-1.328-1.865-1.94.065-.072.157-.102.27-.102.86 0 2.894 1.84 2.894 1.84s.549.568.881.568a.2.2 0 0 0 .186-.105c.235-.395-2.186-2.219-2.323-2.971-.092-.51.064-.768.356-.768 0 .008.17-.029.494.176m16.226.592c-.137.752-2.558 2.576-2.323 2.97.044.074.11.106.186.106.332 0 .88-.568.88-.568s2.034-1.84 2.896-1.84c.112 0 .204.03.269.101.566.613-.447 1.088-1.865 1.942-1.419.853-1.51 1.116-1.309 1.44q.018.027.064.027c.402 0 2.318-1.493 3.172-1.493.198 0 .34.079.391.276.294 1.112-3.21 1.36-2.984 2.164.032.117.115.203.228.203.505 0 1.682-.955 2.328-.955.16 0 .287.058.364.203.459.866-3.163 1.815-3.192 1.822-.596.154-1.66.336-2.697.336-.636 0-1.261-.04-1.764-.26a1.9 1.9 0 0 1-.739-.624c-.04-.069-.102-.148-.142-.205-.573-.968-.455-1.738.49-2.676 1.026-1.019 1.621-2.508 1.621-2.508s.205-.79.666-.79a.4.4 0 0 1 .067.004c.508.08.88 1.374-.184 2.165-.707.525-.38.94.04.94a.66.66 0 0 0 .581-.354c.41-.743 1.527-2.653 2.106-3.018.559-.353.99-.182.85.592"/></svg></span> <strong>Hugging Face Datasets</strong></a></li>
</ul>
</div>
<h3 id="migration-guide">Migration Guide<a class="headerlink" href="#migration-guide" title="Permanent link">#</a></h3>
<div class="grid cards">
<!-- - [:simple-apachespark: **Coming from Spark**](migratoin/spark_migration.md) -->
<ul>
<li><a href="../migration/dask_migration/"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m11.246 9.754 5.848-3.374a.2.2 0 0 0 .1-.175l.002-2.553c0-.324-.133-.645-.392-.841a1 1 0 0 0-1.118-.074l-2.425 1.4-6.436 3.712a1.01 1.01 0 0 0-.504.872l-.003 8.721v2.825c0 .324.132.645.39.842.335.253.766.278 1.12.074l2.363-1.364a.2.2 0 0 0 .101-.175l.003-8.244a1.9 1.9 0 0 1 .951-1.646m10.316-4.336a1 1 0 0 0-.504-.137 1 1 0 0 0-.503.137l-8.86 5.112a1.01 1.01 0 0 0-.505.87l-.003 11.591c0 .364.188.69.503.872a1 1 0 0 0 1.007 0l8.86-5.112a1.01 1.01 0 0 0 .504-.872l.004-11.59a1 1 0 0 0-.503-.871M6.378 7.074l6.334-3.655a.2.2 0 0 0 .1-.175l.001-2.193c0-.324-.133-.646-.392-.84a1 1 0 0 0-1.118-.075L2.443 5.25a1.01 1.01 0 0 0-.504.872l-.003 11.546c0 .324.133.645.39.842a1 1 0 0 0 1.12.074l1.877-1.082a.2.2 0 0 0 .1-.175l.003-8.605c0-.68.363-1.307.952-1.647z"/></svg></span> <strong>Coming from Dask</strong></a></li>
</ul>
</div>
<h3 id="tutorials">Tutorials<a class="headerlink" href="#tutorials" title="Permanent link">#</a></h3>
<div class="grid cards">
<ul>
<li><a href="https://colab.research.google.com/github/Eventual-Inc/Daft/blob/main/tutorials/mnist.ipynb"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m22.7 14.3-1 1-2-2 1-1c.1-.1.2-.2.4-.2.1 0 .3.1.4.2l1.3 1.3c.1.2.1.5-.1.7M13 19.9V22h2.1l6.1-6.1-2-2zM21 5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h6v-1.9l1.1-1.1H5l3.5-4.5 2.5 3 3.5-4.5 1.6 2.1 4.9-5z"/></svg></span> <strong>MNIST Digit Classification</strong></a></li>
<li><a href="https://colab.research.google.com/github/Eventual-Inc/Daft/blob/main/tutorials/embeddings/daft_tutorial_embeddings_stackexchange.ipynb"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.749.749 0 0 1-.326 1.275.75.75 0 0 1-.734-.215ZM11.5 7a4.499 4.499 0 1 0-8.997 0A4.499 4.499 0 0 0 11.5 7"/></svg></span> <strong>Running LLMs on the Red Pajamas Dataset</strong></a></li>
<li><a href="https://colab.research.google.com/github/Eventual-Inc/Daft/blob/main/tutorials/image_querying/top_n_red_color.ipynb"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.5 2C18 2 20 4 20 6.5c0 .88-.25 1.71-.69 2.4l3.08 3.1L21 13.39l-3.12-3.07c-.69.43-1.51.68-2.38.68C13 11 11 9 11 6.5S13 2 15.5 2m0 2A2.5 2.5 0 0 0 13 6.5 2.5 2.5 0 0 0 15.5 9 2.5 2.5 0 0 0 18 6.5 2.5 2.5 0 0 0 15.5 4m-8 10.5L4 19h14l-4.5-6-3.5 4.5zM20 20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.5c-.32.77-.5 1.61-.5 2.5a6.5 6.5 0 0 0 6.5 6.5c.68 0 1.34-.11 1.96-.3L20 15.24z"/></svg></span> <strong>Querying Images with UDFs</strong></a></li>
<li><a href="https://colab.research.google.com/github/Eventual-Inc/Daft/blob/main/tutorials/text_to_image/text_to_image_generation.ipynb"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 13.5 5 18h8.03c.08 1.1.44 2.12 1 3H5a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v6.18c-.5-.11-1-.18-1.5-.18-1.72 0-3.27.67-4.43 1.76L14.5 12 11 16.5zM19 20a2.5 2.5 0 0 1-2.5-2.5c0-.4.09-.78.26-1.12l-1.09-1.09c-.42.63-.67 1.39-.67 2.21 0 2.21 1.79 4 4 4V23l2.25-2.25L19 18.5zm0-6.5V12l-2.25 2.25L19 16.5V15a2.5 2.5 0 0 1 2.5 2.5c0 .4-.09.78-.26 1.12l1.09 1.09c.42-.63.67-1.39.67-2.21 0-2.21-1.79-4-4-4"/></svg></span> <strong>Image Generation on GPUs</strong></a></li>
</ul>
</div>
<h3 id="advanced">Advanced<a class="headerlink" href="#advanced" title="Permanent link">#</a></h3>
<div class="grid cards">
<ul>
<li><a href="../advanced/memory/"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 17H7V7h10m4 4V9h-2V7a2 2 0 0 0-2-2h-2V3h-2v2h-2V3H9v2H7c-1.11 0-2 .89-2 2v2H3v2h2v2H3v2h2v2a2 2 0 0 0 2 2h2v2h2v-2h2v2h2v-2h2a2 2 0 0 0 2-2v-2h2v-2h-2v-2m-6 2h-2v-2h2m2-2H9v6h6z"/></svg></span> <strong>Managing Memory Usage</strong></a></li>
<li><a href="../advanced/partitioning/"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M48 128c-17.7 0-32 14.3-32 32s14.3 32 32 32h352c17.7 0 32-14.3 32-32s-14.3-32-32-32zm0 192c-17.7 0-32 14.3-32 32s14.3 32 32 32h352c17.7 0 32-14.3 32-32s-14.3-32-32-32z"/></svg></span> <strong>Partitioning</strong></a></li>
<li><a href="../distributed/"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 16h3v-2h14v2h3v2h-3v2H5v-2H2zm0-8h5v2h10V8h5V6h-5V4H7v2H2z"/></svg></span> <strong>Distributed Computing</strong></a></li>
</ul>
</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/squidfunk" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://join.slack.com/t/dist-data/shared_invite/zt-2e77olvxw-uyZcPPV1SRchhi8ah6ZCtg" target="_blank" rel="noopener" title="join.slack.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1s21.16-47.06 47.06-47.06h47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06S448 171 448 196.9s-21.16 47.06-47.06 47.06h-47.06zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06S309 480 283.1 480s-47.06-21.16-47.06-47.06v-47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06s21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/eventualcomputing/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://x.com/daft_dataframe" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["search.suggest", "search.highlight", "content.tabs.link", "toc.follow", "toc.integrate", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.top"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
        <script src="../assets/_markdown_exec_pyodide.js"></script>
      
    
  </body>
</html>